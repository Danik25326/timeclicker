// === –ì–õ–û–ë–ê–õ–¨–ù–Ü –ó–ú–Ü–ù–ù–Ü ===
const rssFeeds=['https://www.ukrinform.ua/rss','https://www.pravda.com.ua/rss/','https://interfax.com.ua/news/general.rss'],CACHE_DURATION=36e5;
let score=0,clickPower=1,autoRate=0,isPlaying=0,currentTrack=0,displayedTrackIndex=0,sessionStart=Date.now(),totalUpgradesBought=0,maxPerClick=1,prestigeMultiplier=1,totalReverbs=0,maxAutoRate=0,maxCombo=0,clickCloudTotal=0,lastClickTime=0,currentCombo=0,maxComboEver=0,comboTimeout=null,MAX_CLICK_INTERVAL=350,COMBO_THRESHOLD=5,isReverbActive=0,reverbHoldTimeout=null,clickMultiplier=1,buttons=[],prestigeThreshold=3600,currentPrestigeProgress=0,reverseClockHands=false,animationsEnabled=true,keepMusicOnPrestige=false,ownedTracks=[0],
gameState={v:'2.2',s:0,p:1,a:0,u:0,m:1,pm:1,tr:0,ma:0,mc:0,cct:0,pt:3600,cpp:0,cm:1,vol:45,rev:false,anim:true,lang:'uk',tutorialDone:false,ul:[],mb:[],ot:[0],ownedSkins:{shapes:["round"],clockSkins:["neon-blue"],handSkins:["darkblue"],effects:["red"]},currentSkins:{shape:"round",clock:"neon-blue",hand:"darkblue",effect:"red"}},
firstAchievementsCheck=true,cachedNews=[],lastFetchTime=0,newsTickerVisible=false,userGroqApiKey='',currentDiscordChannel='general',discordOverlay=null,discordChannelMessages={},unreadCounts={ai:1},discordActivityInterval=null,visitedChannels={},
constellation={center:{unlocked:false,level:0,maxLevel:1,bonusPerLevel:1000,cost:1,name:"–Ø–¥—Ä–æ —á–∞—Å—É"},hourHand:{stars:[{id:'h1',distance:100,angle:0,unlocked:false,bonus:{type:'prestige',value:0.1},cost:1},{id:'h2',distance:200,angle:0,unlocked:false,bonus:{type:'clickMultiplier',value:2},cost:2}],angle:0},minuteHand:{stars:[{id:'m1',distance:80,angle:90,unlocked:false,bonus:{type:'autoRate',value:50},cost:1},{id:'m2',distance:160,angle:90,unlocked:false,bonus:{type:'clickPower',value:5},cost:1},{id:'m3',distance:240,angle:90,unlocked:false,bonus:{type:'combo',value:10},cost:2},{id:'m4',distance:320,angle:90,unlocked:false,bonus:{type:'prestige',value:0.15},cost:3}],angle:90},secondHand:{stars:[{id:'s1',distance:70,angle:240,unlocked:false,bonus:{type:'clickPower',value:2},cost:1},{id:'s2',distance:140,angle:240,unlocked:false,bonus:{type:'autoRate',value:20},cost:1},{id:'s3',distance:210,angle:240,unlocked:false,bonus:{type:'skinDiscount',value:0.3},cost:2},{id:'s4',distance:280,angle:240,unlocked:false,bonus:{type:'prestige',value:0.05},cost:2},{id:'s5',distance:350,angle:240,unlocked:false,bonus:{type:'all',value:1.5},cost:5}],angle:240}},skillPoints=0,isConstellationVisible=false,
languages=[{code:'uk',name:'–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞',native:'–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞'},{code:'en',name:'English',native:'English'},{code:'pl',name:'Polish',native:'Polski'},{code:'de',name:'German',native:'Deutsch'},{code:'fr',name:'French',native:'Fran√ßais'},{code:'es',name:'Spanish',native:'Espa√±ol'},{code:'it',name:'Italian',native:'Italiano'}],
isTutorialActive=false,currentTutorialStep=0,typewriterTimeout=null,fullTextString='',isTextTyping=false;
const d=document,q=s=>d.querySelector(s),qa=s=>d.querySelectorAll(s),id=s=>d.getElementById(s);

// === –§–£–ù–ö–¶–Ü–á –ü–ï–†–ï–ö–õ–ê–î–£ ===
function t(str){if(gameState.lang==='uk')return str;if(typeof TRANSLATIONS!=='undefined'){return TRANSLATIONS[gameState.lang]?.[str]||TRANSLATIONS['en']?.[str]||str;}return str;}
function changeLanguage(lang){gameState.lang=lang;qa('[data-lang-key]').forEach(el=>{const original=el.getAttribute('data-original-text')||el.textContent;if(!el.getAttribute('data-original-text'))el.setAttribute('data-original-text',original);el.innerHTML=t(original);});
 if(id('upgrades'))id('upgrades').innerHTML='';buttons=[];initUpgrades();
 if(id('multipliers'))id('multipliers').innerHTML='';initMultipliers();
 refreshAllSkinGrids();updateAchievements();updateMusicUI();updateScore();updateStats();saveGame();}
function openLanguageModal(){const m=id('languageSelectionOverlay'),l=id('langList'),b=id('langConfirmBtn');if(!m)return;m.style.display='flex';b.style.display='none';
 const render=(f)=>{l.innerHTML='';languages.filter(x=>x.name.toLowerCase().includes(f)||x.native.toLowerCase().includes(f)).forEach(lang=>{const btn=d.createElement('button');btn.className='choose-btn';btn.style.cssText='min-width:auto;padding:15px;font-size:16px;text-align:left;';btn.innerHTML=`<span style="font-size:1.2em">${lang.native}</span><br><span style="font-size:0.8em;opacity:0.7">${lang.name}</span>`;btn.onclick=()=>{changeLanguage(lang.code);qa('#langList .choose-btn').forEach(b=>b.style.border='none');btn.style.border='2px solid white';b.style.display='block';};l.appendChild(btn);});};render('');id('langSearch').oninput=(e)=>render(e.target.value.toLowerCase());
 b.onclick=()=>{m.style.display='none';if(!gameState.tutorialDone && score<10) showTutorialChoice();};}

// === –°–¢–ê–†–¢ –ì–†–ò ===
window.startGame=function(v){id('chooser').style.display='none';id('game').classList.remove('game-hidden');if(v==='mobile')d.body.classList.add('mobile-version');else d.body.classList.remove('mobile-version');initGame();}
function initGame(){initializeDOMElements();initializeSystems();let loaded=loadGame();
 qa('[data-lang-key]').forEach(el=>el.setAttribute('data-original-text',el.textContent));
 if(!loaded){refreshAllSkinGrids();applyAllSkins();saveGame();checkFirstRun();}else{changeLanguage(gameState.lang);if(!gameState.tutorialDone&&score<10)checkFirstRun();}startIntervals();setTimeout(()=>{updateScore();updateStats();updateReverbText();refreshAllSkinGrids();applyAllSkins();updateAchievements();firstAchievementsCheck=false;updateDevLinks();},100);}
function initializeDOMElements(){window.clock=id("clickableClock");window.clockWrapper=id("clockWrapper");window.comboBubble=id("comboBubble");window.comboCount=id("comboCount");window.clickCloudEl=id("clickCloud");window.musicBtn=id("musicBtn");window.prevTrack=id("prevTrack");window.nextTrack=id("nextTrack");window.player=id("player");window.scoreText=id("score");window.upgradesContainer=id("upgrades");window.multipliersContainer=id("multipliers");window.clickGainEl=id("clickGain");window.cloudTotalEl=id("cloudTotal");window.nowPlaying=id("nowPlaying");window.realTimePlayedEl=id("realTimePlayed");window.virtualTimeEl=id("virtualTime");window.totalUpgradesEl=id("totalUpgrades");window.maxPerClickEl=id("maxPerClick");window.prestigeMultEl=id("prestigeMult");window.reverbBtn=id("reverbBtn");window.timeTunnel=id("timeTunnel");window.worldTitle=id("worldTitle");window.toastContainer=id("toastContainer");window.reverbOverlay=id("reverbOverlay");window.reverbClock=id("reverbClock");window.reverbHint=id("reverbHint");window.reverbDesc=id("reverbDesc");window.nextMultiplierEl=id("nextMultiplier");if(window.clock)window.clock.style.borderWidth='10px';if(window.reverbClock)window.reverbClock.style.borderWidth='10px';}
function initializeSystems(){initSettings();initDate();initMusic();initUpgrades();initMultipliers();initAchievements();initSkins();initReverbSystem();initTabs();initSecretSystem();initClickHandler();initConstellationSystem();initNewTabs();}

// === –§–£–ù–ö–¶–Ü–á –Ü–ù–Ü–¶–Ü–ê–õ–Ü–ó–ê–¶–Ü–á (–ü–ï–†–ï–ù–ï–°–ï–ù–Ü –í–ì–û–†–£) ===
function initSettings(){const volumeSlider=id('volumeSlider'),volumeValue=id('volumeValue'),reverseHands=id('reverseHands'),disableAnimations=id('disableAnimations');if(!volumeSlider)return;volumeSlider.value=gameState.vol||45;volumeValue.textContent=(gameState.vol||45)+'%';if(player)player.volume=(gameState.vol||45)/100;reverseHands.checked=gameState.rev||false;reverseClockHands=gameState.rev||false;disableAnimations.checked=!(gameState.anim!==false);animationsEnabled=gameState.anim!==false;d.body.classList.toggle('no-animations',!animationsEnabled);volumeSlider.addEventListener('input',function(){let v=this.value;volumeValue.textContent=v+'%';if(player)player.volume=v/100;gameState.vol=v;saveGame();});reverseHands.addEventListener('change',function(){reverseClockHands=this.checked;gameState.rev=reverseClockHands;saveGame();});disableAnimations.addEventListener('change',function(){animationsEnabled=!this.checked;d.body.classList.toggle('no-animations',!animationsEnabled);gameState.anim=animationsEnabled;saveGame();});}
function initDate(){function updateDate(){id("currentDate").textContent=new Date().toLocaleDateString(gameState.lang==='uk'?'uk-UA':(gameState.lang==='en'?'en-US':'uk-UA'));}updateDate();setInterval(updateDate,6e4);}
function initTabs(){qa(".top-tabs .tab").forEach(b=>{b.addEventListener("click",()=>{qa(".top-tabs .tab").forEach(x=>x.classList.remove("active"));qa(".tab-page").forEach(x=>x.classList.remove("active"));b.classList.add("active");id(b.dataset.tab).classList.add("active");if(isTutorialActive&&tutorialSteps[currentTutorialStep].tab===b.dataset.tab)onStepTextComplete();});});}
function initNewTabs(){const l=id('devLinkTelegram'),i=id('devLinkInstagram');if(l)l.href="https://t.me/brainmathx_bot";if(i)i.href="#";}
function updateDevLinks(){} 
function initReverbSystem(){restartEffect.init();reverbBtn.addEventListener("click",()=>{if(!confirm(t("–¢–∏ –≤–ø–µ–≤–Ω–µ–Ω–∏–π, —â–æ —Ö–æ—á–µ—à –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ —á–∞—Å –Ω–∞–∑–∞–¥? –í—Å—ñ —Ç–≤–æ—ó –∞–ø–≥—Ä–µ–π–¥–∏ –±—É–¥—É—Ç—å –≤—Ç—Ä–∞—á–µ–Ω—ñ, –∞–ª–µ —Ç–∏ –æ—Ç—Ä–∏–º–∞—î—à –º–Ω–æ–∂–Ω–∏–∫!")))return;if(isPlaying){if(confirm("Keep music playing?"))keepMusicOnPrestige=true;else{keepMusicOnPrestige=false;isPlaying=0;player.pause();musicBtn.textContent=t("–í–∫–ª—é—á–∏—Ç–∏ –º—É–∑–∏–∫—É");}}else{keepMusicOnPrestige=false;}startReverbMode();});}
function initConstellationSystem(){loadConstellation();const isMobile=d.body.classList.contains('mobile-version')||window.innerWidth<768;const size=isMobile?'408px':'800px';const scale=isMobile?'0.2':'1';id('constellationContainer').innerHTML='<div id="constellationBorder" style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:'+size+';height:'+size+';border:2px solid #666;border-radius:50%;pointer-events:none;z-index:5;box-shadow:0 0 20px rgba(100,100,100,0.5),inset 0 0 15px rgba(100,100,100,0.3);"></div><div id="constellationClock" style="position:relative;width:800px;height:800px;margin:auto;"></div><div id="constellationSkillPoints" style="position:absolute;top:20px;left:20px;background:rgba(0,0,0,0.7);color:#fff;padding:10px;border-radius:5px;z-index:1000;display:none;">–û—á–∫–∏: 0</div><button id="constellationExitBtn" style="position:absolute;bottom:20px;right:20px;padding:10px 20px;background:#f44336;color:white;border:none;border-radius:5px;cursor:pointer;z-index:1000;">–í–∏—Ö—ñ–¥</button><div id="constellationUpgradePanel" style="position:absolute;bottom:60px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,0.9);border-radius:10px;padding:15px;display:none;z-index:1000;min-width:300px;"><div id="constellationUpgradeContent"></div><div style="text-align:center;margin-top:10px;"><button id="constellationBuyBtn" style="padding:8px 16px;background:#4CAF50;color:white;border:none;border-radius:4px;cursor:pointer;display:none;">–í—ñ–¥–∫—Ä–∏—Ç–∏</button><button onclick="hideUpgradePanel()" style="padding:8px 16px;background:#f44336;color:white;border:none;border-radius:4px;cursor:pointer;margin-left:10px;">–ó–∞–∫—Ä–∏—Ç–∏</button></div></div>';id('constellationExitBtn').onclick=hideConstellation;}

// === –¢–£–¢–û–†–Ü–ê–õ ===
function checkFirstRun(){setTimeout(()=>openLanguageModal(),500);}
function showTutorialChoice(){const d=id('tutorialDialogue'),c=id('tutorialChoiceBtns'),back=id('tutorialBackBtn'),next=id('tutorialNextBtn');id('tutorialOverlay').style.display='block';d.style.display='block';back.style.display='none';next.style.display='none';c.style.display='flex';
 typeText(t("–ö–æ–ª–∏ –º–∏ —Ä–æ–∑—ñ–±—Ä–∞–ª–∏—Å—è –Ω–∞ —è–∫—ñ–π —Ç–∏ –º–æ–≤—ñ —Ö–æ—á–µ—à—å –≥—Ä–∞—Ç–∏, –∑–∞–ª–∏—à–∏–≤—Å—è –æ—Å—Ç–∞–Ω—ñ–π –∫—Ä–æ–∫. –ß–∏ —Ç–∏ —Ö–æ—á–µ—à—å –ø—Ä–æ–π—Ç–∏ —Ç—É—Ç–æ—Ä—ñ–∞–ª, —â–æ–± –±—É–ª–æ –ª–µ–≥—à–µ —Ä–æ–∑—ñ–±—Ä–∞—Ç–∏—Å—è –≤ –º–µ—Ö–∞–Ω—ñ—Ü—ñ –≥—Ä–∏?"));
 id('skipTutorialChoice').onclick=()=>{endTutorial(true);};id('startTutorialChoice').onclick=()=>{startTutorial();};
 id('skipTutorialChoice').textContent=t("–ü—Ñ—Ñ—Ñ —Ç—É—Ç–æ—Ä—ñ–∞–ª –¥–ª—è –¥–∏—Ç–∏–Ω–∏");id('startTutorialChoice').textContent=t("–ß–æ–º—É –Ω—ñ, –º–æ–∂–µ –¥—ñ–∑–Ω–∞—é—Å—å —â–æ—Å—å –Ω–æ–≤–µ");}
const tutorialSteps=[
 {text:"–¢–∞–∫ —è–∫—â–æ —Ç–∏ –ø–æ–≥–æ–¥–∏–≤—Å—è –Ω–∞ —Ç—É—Ç–æ—Ä—ñ–∞–ª, —Ç–æ –Ω–µ–≥–∞–µ–º–æ —á–∞—Å—É —ñ —Ä–æ–∑–ø–æ—á–Ω–µ–º–æ –π–æ–≥–æ",el:null,action:"next"},
 {text:"–¶–µ —Ç–≤—ñ–π —á–∞—Å, —ñ –≤—ñ–Ω –Ω–µ–≤—Ç–æ–º–Ω–æ —É—Ö–æ–¥–µ. –Ü –π–æ–≥–æ –Ω—ñ—è–∫ –Ω–µ –∑—É–ø–∏–Ω–∏—Ç–∏. –ù–∞–∂–º–∏ –Ω–∞ –≥–æ–¥–∏–Ω–Ω–∏–∫, —â–æ–± –≤–∏—Ç—Ä–∞—Ç–∏—Ç–∏ —á–∞—Å",el:"#clockWrapper",action:"click_clock"},
 {text:"–¢—É—Ç —Ç–∏ –º–æ–∂–µ—à—å –ø–æ–±–∞—á–∏—Ç–∏ —Å–∫—ñ–ª—å–∫–∏ —á–∞—Å—É —Ç–∏ –≤–∂–µ –≤—Ç—Ä–∞—Ç–∏–≤, –∑–≤—É—á–∏—Ç—å —Å—É–º–Ω–æ, –∞–ª–µ —Ü–µ –ø—Ä–∞–≤–¥–∏–≤–æ, –∑–∞—Ä–∞–∑ —è –ø–æ–∫–∞–∂—É –¥–ª—è —á–æ–≥–æ —Ç–æ–±—ñ –≤–∏—Ç—Ä–∞—á–∞—Ç–∏ —ñ —â–æ —Ä–æ–±–∏—Ç–∏ –∑ –≤–∏—Ç—Ä–∞—á–µ–Ω–∏–º —á–∞—Å–æ–º",el:"#score",action:"next"},
 {text:"–©–æ–± –Ω–µ –±—É–ª–æ —Ç–∞–∫ —Å—É–º–Ω–æ —ñ –Ω—É–¥–Ω–æ —Ç–∏ –º–æ–∂–µ—à—å –ø—Ä–æ—Å–ª—É—Ö–æ–≤—É–≤–∞—Ç–∏ –º—É–∑–∏–∫—É(–∞–ª–µ –Ω–∞–≤—ñ—Ç—å –Ω–∞ –ø–æ—à—É–∫ –º—É–∑–∏–∫–∏ —Ç—Ä–µ–±–∞ –≤–∏—Ç—Ä–∞—á–∞—Ç–∏ —á–∞—Å)",el:".music-player",action:"next",pos:"top"},
 {text:"–í–∏—Ç—Ä–∞—á–µ–Ω–∏–π —á–∞—Å —Ç–∏ –º–æ–∂–µ—à—å –≤–∏—Ç—Ä–∞—á–∞—Ç–∏ –Ω–∞ –∞–ø–≥—Ä–µ–π–¥–∏. –î–ª—è —á–æ–≥–æ? –ù—É –∑–≤—ñ—Å–Ω–æ –∂–µ –¥–ª—è —Ç–æ–≥–æ —â–æ–± –≤–∏—Ç—Ä–∞—á–∞—Ç–∏ –±—ñ–ª—å—à–µ —á–∞—Å, –¥–ª—è —á–æ–≥–æ —â–µ",el:".left-panel",tab:"tab-upgrades",action:"next"},
 {text:"–¶–µ –Ω–µ —î–¥–∏–Ω–µ –Ω–∞ —â–æ –º–æ–∂–Ω–∞ –≤–∏—Ç—Ä–∞—á–∞—Ç–∏ —á–∞—Å, —Ö–æ–¥—ñ–º–æ",el:"button[data-tab='tab-skins']",action:"next"},
 {text:"–©–µ —á–∞—Å —Ç–∏ –º–æ–∂–µ—à—å –≤–∏—Ç—Ä–∞—á–∞—Ç–∏ –Ω–∞ —Å–∫—ñ–Ω–∏ –¥–ª—è —Å–≤–æ–≥–æ –≥–æ–¥–∏–Ω–Ω–∏–∫–∞",el:".left-panel",tab:"tab-skins",action:"next"},
 {text:"–î–∞–≤–∞–π –ø—Ä–æ–π–¥–µ–º–æ—Å—è –ø–æ –Ω–∏—Ö",el:".left-panel",action:"next"},
 {text:"–¶—è –≥—Ä—É–ø–∞ —Å–∫—ñ–Ω—ñ–≤ –º—ñ–Ω—è—î —Ñ–æ—Ä–º—É —Ç–≤–æ–≥–æ –≥–æ–¥–∏–Ω–Ω–∏–∫–∞",el:"#shapeSkins",action:"next"},
 {text:"–¶—è –≥—Ä—É–ø–∞ —Å–∫—ñ–Ω—ñ–≤ –º—ñ–Ω—è—î –∫–æ–ª—ñ—Ä –æ–±—ñ–¥–∫–∞ –≥–æ–¥–∏–Ω–Ω–∏–∫–∞, —Ç–µ–∂ –Ω—ñ—á–æ–≥–æ —Å–∫–ª–∞–¥–Ω–æ–≥–æ",el:"#clockSkins",action:"next"},
 {text:"–î–∞–ª—ñ –≥—Ä—É–ø–∞ —Å–∫—ñ–Ω—ñ–≤ —è–∫–∞ –∑–º—ñ–Ω—é—î –∫–æ–ª—ñ—Ä —Ç–≤–æ—ó—Ö —Å—Ç—Ä—ñ–ª–æ–∫, –≤—Å—ñ –æ–∫—Ä—ñ–º —Å–µ–∫—É–Ω–¥–Ω–æ—ó). –©–æ–± —Ç–∏ –Ω–µ –∑–∞–±—É–≤–∞–≤, —â–æ —á–∞—Å –≤—Å–µ —â–µ –ø–ª–∏–Ω–µ",el:"#handSkins",action:"next"},
 {text:"–¶—è –≥—Ä—É–ø–∞ —Å–∫—ñ–Ω—ñ–≤ –º—ñ–Ω—è—î –∞–Ω—ñ–º–∞—Ü—ñ—é –∫–ª—ñ–∫—É –ø–æ –≥–æ–¥–∏–Ω–Ω–∏–∫—É",el:"#effectSkins",action:"next"},
 {text:"–ó—ñ —Å–∫—ñ–Ω–∞–º–∏ —Ä–æ–∑—ñ–±—Ä–∞–ª–∏—Å—è, –Ω—ñ—á–æ–≥–æ —Å–∫–ª–∞–¥–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–∞–ª—ñ",el:"button[data-tab='tab-stats']",action:"next"},
 {text:"–¢—É—Ç –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Å—ñ–π —Ç–≤–æ—ó–π –≥—Ä—ñ, —è–∫—â–æ —Ö–æ—á–µ—à—å –¥–µ—Ç–∞–ª—å–Ω—ñ—à–µ –æ–∑–Ω–∞–π–æ–º–∏—Ç–∏—Å—è –∑ —Ç–∏–º —â–æ —Ç—É—Ç –≤—ñ–¥—Å–ª—ñ–¥–∫–æ–≤—É—î—Ç—å—Å—è, –º–æ–∂–µ—à—å —Ü–µ –∑—Ä–æ–±–∏—Ç–∏ –ø—ñ—Å–ª—è —Ç—É—Ç–æ—Ä—ñ–∞–ª—É",el:".left-panel",tab:"tab-stats",action:"next"},
 {text:"–ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–∞–ª—ñ",el:"button[data-tab='tab-achievements']",action:"next"},
 {text:"–°–∞–º–µ —Ç—É—Ç —Ç–∏ –º–æ–∂–µ—à—å –ø–æ–¥–∏–≤–∏—Ç–∏—Å—è —è–∫ –≤—ñ–¥–∫—Ä–∏—Ç–∏ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è —á–∏ —è–∫—ñ –≤ —Ç–µ–±–µ –≤–∂–µ –≤—ñ–¥–∫—Ä–∏—Ç—ñ. –ê —Ç–∞–∫–æ–∂ –≤—ñ—Ç–∞—é —Ç–µ–±–µ –∑ –ø–µ—Ä—à–∏–º —Ç–≤–æ—ó–º –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è–º. –£–ø–µ–≤–Ω–µ–Ω–∏–π —Ç–∏ –∑—É–º—ñ—î—à –∑—ñ–±—Ä–∞—Ç–∏ —ó—Ö —É—Å—ñ—Ö",el:".left-panel",tab:"tab-achievements",action:"next"},
 {text:"–ù—É–º–æ —Ö–æ–¥—ñ–º–æ –¥–∞–ª—ñ",el:"button[data-tab='tab-reverb']",action:"next"},
 {text:"–¢—É—Ç —Ç–∏ –º–æ–∂–µ—à—å –∑—Ä–æ–±–∏—Ç–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫. –î–ª—è —á–æ–≥–æ? –î–ª—è —Ç–æ–≥–æ —â–æ–± –∑–±—ñ–ª—å—à–∏—Ç–∏ –º–Ω–æ–∂–Ω–∏–∫ —ñ –±–∏—Å—Ç—Ä—ñ—à–µ –≤–∏—Ç—Ä–∞—á–∞—Ç–∏ —á–∞—Å. –ê–ª–µ –±—É–¥—å —É–≤–∞–∂–Ω–∏–π, —â–æ –ø—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É –≤ —Ç–µ–±–µ –ø—Ä–æ–≥—Ä–µ—Å –∑—ñ—Ç—Ä–µ—Ç—å—Å—è —ñ –ø—Ä–∏–π–¥–µ—Ç—å—Å—è –ø–æ—á–∏–Ω–∞—Ç–∏ —Å–ø–æ—á–∞—Ç–∫—É, –∞–ª–µ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ —Ç–æ–≥–æ —Å—Ç–∞–Ω—É –≤ —è–∫–æ–º—É —Ç–∏ –±—É–≤ –≤–∂–µ –±–∏—Å—Ç—Ä—ñ—à–µ —ñ–∑ –∑–∞ —Ç–æ–≥–æ —â–æ –≤ —Ç–µ–±–µ –º–Ω–æ–∂–Ω–∏–∫ –∑'—è–≤–∏—Ç—å—Å—è —ñ –∫—Ä—ñ–º –º–Ω–æ–∂–Ω–∏–∫–∞(—Ç–æ–±—ñ —â–µ –¥–µ—â–æ –¥–æ–ø–æ–º–æ–∂–µ, –∞–ª–µ —Ç–∏ —Ü–µ –≤–∏—è—Å–Ω–∏—à –≤–∂–µ —Å–∞–º)",el:".left-panel",tab:"tab-reverb",action:"next"},
 {text:"–û—Å—Ç–∞–Ω–Ω—è –≤–∫–ª–∞–¥–∫–∞, —è–∫–∞ –¥–æ–ø–æ–º–æ–∂–µ —Ç–æ–±—ñ —à–≤–∏–¥—à–µ –≤–∏—Ç—Ä–∞—á–∞—Ç–∏ —á–∞—Å",el:"button[data-tab='tab-multipliers']",action:"next"},
 {text:"–¢—É—Ç —Ç–∏ –º–æ–∂–µ—à—å –ø—Ä–æ–∫–∞—á—É–≤–∞—Ç–∏ —Å–≤–æ—ó –∫–ª—ñ–∫–∏, —è–∫—ñ –≤ —Å–≤–æ—é —á–µ—Ä–≥—É –±—É–¥—É—Ç—å –∑–±—ñ–ª—å—à—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤–∏—Ç—Ä–∞—á–µ–Ω–æ–≥–æ —á–∞—Å—É –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω—ñ –Ω–∞ –≥–æ–¥–∏–Ω–Ω–∏–∫. –í—Å–µ –ª–µ–≥–∫–æ",el:".left-panel",tab:"tab-multipliers",action:"next"},
 {text:"–ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–æ —Ç–µ—Ö–Ω—ñ—á–Ω–∏—Ö –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –≥—Ä–∏",el:"button[data-tab='settings']",action:"next"},
 {text:"–û—Å—å –≤–∫–ª–∞–¥–∫–∞ –¥–µ —Ç–∏ –º–æ–∂–µ—à—å —ñ –≤–∏–º–∏–∫–∞—Ç–∏ –∞–Ω—ñ–º–∞—Ü—ñ—é —É –≥–æ–¥–∏–Ω–Ω–∏–∫–∞, —ñ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –≥—Ä—É —ñ —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ —Ç–≤—ñ–π –ø—Ä–æ–≥—Ä–µ—Å –Ω–∞ —ñ–Ω—à–∏–π –ø—Ä–∏—Å—Ç—Ä—ñ–π, —Ç–æ–±—Ç–æ –Ω—ñ—á–æ–≥–æ —Å–∫–ª–∞–¥–Ω–æ–≥–æ, –∞–ª–µ —è–∫—â–æ –±—É–¥–µ –ø–æ—Ç—Ä–µ–±–∞ —Ä–æ–∑—ñ–±—Ä–∞—Ç–∏—Å—è –≤ –∫–æ–∂–Ω—ñ–π –∫–Ω–æ–ø—Ü—ñ —Ç–æ –º–∏ —è–∫ —Ä–∞–∑ –∑–∞—Ä–∞–∑ –ø–µ—Ä–µ–π–¥–µ–º–æ –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ—ó –≤–∫–ª–∞–¥–∫–∏, —è–∫–∞ –≤—ñ–¥–∫–∏–Ω–∏—Ç—å –≤—Å—ñ –ø–∏—Ç–∞–Ω–Ω—è —è–∫—ñ –∑'—è–≤–∏–ª–∏—Å—å. –Ü –¥–æ—Ä–µ—á—ñ –Ω–∞ —Ä–∞—Ö—É–Ω–æ–∫ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è. –ì—Ä–∞ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–æ–∂–Ω—ñ –ø—ñ–≤ —Ö–≤–∏–ª–∏–Ω–∏, —Ç–æ–∂ —è–∫—â–æ —Ç–∏ –ø–æ–≥—Ä–∞—î—à —ñ –≤–∏—Ä—ñ—à–∏—à –ø–∏—Ç–∏ –ø–æ—ó—Å—Ç–∏ —á–∏ –≤–∑–∞–≥–∞–ª—ñ —Å–ø–∞—Ç–∏ –ø—ñ—Ç–∏, –º–æ–∂–µ—à—å –≤–∏–º–∏–∫–∞—Ç–∏ –≥—Ä—É —Ç–æ–º—É —â–æ –ø—Ä–æ–≥—Ä–µ—Å –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è",el:".left-panel",tab:"settings",action:"next"},
 {text:"–ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ—ó –≤–∫–ª–∞–¥–∫–∏",el:"button[data-tab='tab-tutorial']",action:"next"},
 {text:"–¶—è –≤–∫–ª–∞–¥–∫–∞ –¥–ª—è —Ç–∏—Ö –∫—Ç–æ —á–∏ –Ω–µ —Ä–æ–∑—ñ–±—Ä–∞–≤—Å—è –≤ —á–æ–º—É—Å—å, —á–∏ —Ö–æ—á–µ –±—ñ–ª—å—à–µ —Ä–æ–∑—ñ–±—Ä–∞—Ç–∏—Å—è –≤ –º–µ—Ö–∞–Ω—ñ—Ü—ñ, —á–∏ –Ω–∞–≤—ñ—Ç—å –¥–ª—è —Ç–∏—Ö –∫–æ–º—É –ø—Ä–æ—Å—Ç–æ —Ü—ñ–∫–∞–≤–æ. –ö–æ–ª–∏ –≤–∏–Ω–∏–∫–∞—î –ø–æ—Ç—Ä–µ–±–∞ –∑–≥–∞–¥–∞—Ç–∏ —è–∫ —â–æ—Å—å –ø—Ä–∞—Ü—é—î. –í–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Ü—é –≤–∫–ª–∞–¥–∫—É —ñ –ø–æ—à—É–∫–∞—Ç–∏ —á–∏ –æ–∫—Ä–µ–º–æ –ø–æ –≤–∫–ª–∞–¥–∫–∞–º –º–µ—Ö–∞–Ω—ñ–∫–∏ —á–∏ –∑–∞–≥–∞–ª—å–Ω—ñ –º–µ—Ö–∞–Ω—ñ–∫–∏ –≥—Ä–∏. –î—É–∂–µ –∑—Ä—É—á–Ω–æ",el:".left-panel",tab:"tab-tutorial",action:"next"},
 {text:"–ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–æ –æ—Å—Ç–∞–Ω–Ω—å–æ—ó –≤–∫–ª–∞–¥–∫–∏",el:"button[data-tab='tab-developers']",action:"next"},
 {text:"–î—è–∫—É—é –∑–∞ —Ç–µ —â–æ –ø—Ä–æ–π—à–ª–∏ –≤–µ—Å—å —Ü–µ–π —Ç—É—Ç–æ—Ä—ñ–∞–ª, —è–∫—â–æ —á–µ—Å—Ç–Ω–æ —è –∑–∞–ø–∞—Ä–∏–≤—Å—è –Ω–∞–¥ –Ω–∏–º, —â–æ–± –í–∞–º –±—É–ª–æ 100% –∑—Ä–æ–∑—É–º—ñ–ª–æ –ø—Ä–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —ñ –º–µ—Ö–∞–Ω—ñ–∫—É –≥—Ä–∏. –Ø —Ä–æ–∑—Ä–æ–±–∏–≤ –≥—Ä—É –≤ –æ–¥–Ω–æ–≥–æ. –í –º–µ–Ω–µ –Ω—ñ –∫–æ–º–∞–Ω–¥–∏, –Ω—ñ–∫–æ–≥–æ. –°–ø–æ–¥—ñ–≤–∞—é—Å—å –í–∞–º —Å–ø–æ–¥–æ–±–∞—î—Ç—å—Å—è –≥—Ä–∞ —ñ —É –í–∞—Å –∑–∞–ª–∏—à–∞—Ç—å—Å—è –≥–∞—Ä–Ω—ñ –ø–æ—á—É—Ç—Ç—è –ø—ñ—Å–ª—è —Ü—ñ—î—ó –≥—Ä–∏. –î–ª—è –ø–æ–¥—è–∫–∏ —á–∏ –ø—Ä–æ–ø–æ–Ω—É–≤–∞–Ω–Ω—è —ñ–¥–µ–π, —á–∏ –ª—ñ–∫–≤—ñ–¥–∞—Ü—ñ—ó –±–∞–≥—ñ–≤ –∑–≤–µ—Ä—Ç–∞–π—Ç–µ—Å—è –¥–æ –º–µ–Ω–µ –≤ –º–æ—ó—Ö —Å–æ—Ü —Å–µ—Ç—è—Ö. –ë—É–¥—É –¥—É–∂–µ —Ä–∞–¥–∏–π –≤—Å—ñ–º –∫—Ç–æ —Ö–æ—á–µ –ø—ñ–¥—Ç—Ä–∏–º–∞—Ç–∏ –≥—Ä—É —á–∏ —Å–ª–æ–≤–∞–º–∏, —á–∏ —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–æ",el:".left-panel",tab:"tab-developers",action:"next"},
 {text:"–î—è–∫—É—é –∑–∞ —Ç–µ —â–æ –ø—Ä–æ–π—à–ª–∏ —Ç—É—Ç–æ—Ä—ñ–∞–ª, —Å–ø–æ–¥—ñ–≤–∞—é—Å—å –í–∞–º –±—É–ª–æ –∫–æ—Ä–∏—Å–Ω–æ —ñ –∑—Ä–æ–∑—É–º—ñ–ª–æ. –ì–∞—Ä–Ω–æ—ó –í–∞–º –≥—Ä–∏ —ñ –ø–∏—à—ñ—Ç—å –ø–æ —Ü—é –≥—Ä—É –≤ —Å–≤–æ—ó—Ö —Å–æ—Ü —Å–µ—Ç—è—Ö —è–∫—â–æ —Å–ø–æ–¥–æ–±–∞–ª–æ—Å—å. –ë—É–¥—É –¥—É–∂–µ –≤–¥—è—á–Ω–∏–π —ñ –∑–≤–µ—Ä—Ç–∞–π—Ç–µ—Å—è –¥–æ –º–æ—ó—Ö —Å–æ—Ü. —Å–µ—Ç–µ–π –¥–ª—è –ø—Ä–æ–ø–æ–Ω—É–≤–∞–Ω–Ω—è —á–æ–≥–æ—Å—å —Å–≤–æ–≥–æ",action:"finish"}
];
function startTutorial(){isTutorialActive=true;currentTutorialStep=0;id('tutorialChoiceBtns').style.display='none';id('skipTutorialTopBtn').style.display='block';id('skipTutorialTopBtn').onclick=()=>endTutorial(true);id('tutorialOverlay').style.display='block';id('tutorialDialogue').style.display='block';showTutorialStep(0);}
function typeText(txt,cb){const t=id('tutorialText');t.innerHTML='';fullTextString=txt;isTextTyping=true;let i=0;clearTimeout(typewriterTimeout);
 const cursor=d.createElement('span');cursor.className='typing-cursor';cursor.textContent='|';t.appendChild(cursor);
 function type(){if(i<txt.length){t.innerHTML=txt.substring(0,i+1)+'<span class="typing-cursor">|</span>';i++;typewriterTimeout=setTimeout(type,20);id('tutorialDialogue').onclick=()=>finishTyping();}else{isTextTyping=false;if(cb)cb();id('tutorialDialogue').onclick=null;}}type();}
function finishTyping(){if(!isTextTyping)return;clearTimeout(typewriterTimeout);const t=id('tutorialText');t.innerHTML=fullTextString;isTextTyping=false;onStepTextComplete();}
function showTutorialStep(idx){if(idx>=tutorialSteps.length){endTutorial();return;}const step=tutorialSteps[idx];qa('.highlighted-step').forEach(e=>{e.classList.remove('highlighted-step');e.style.zIndex='';e.style.position='';});
 if(step.tab){const b=document.querySelector(`button[data-tab='${step.tab}']`);if(b)b.click();}
 const dia=id('tutorialDialogue');if(step.pos==='top')dia.classList.add('dialogue-top');else dia.classList.remove('dialogue-top');
 if(step.el){const el=d.querySelector(step.el);if(el){el.classList.add('highlighted-step');el.style.position='relative';el.style.zIndex='15001';el.scrollIntoView({behavior:'smooth',block:'center'});}}
 id('tutorialBackBtn').style.display=idx>0?'inline-block':'none';id('tutorialNextBtn').style.display='none';
 id('tutorialNextBtn').textContent=step.action==='finish'?t("–ó–∞–∫—ñ–Ω—á–∏—Ç–∏ —Ç—É—Ç–æ—Ä—ñ–∞–ª"):t("–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏");id('tutorialBackBtn').textContent=t("–ù–∞–∑–∞–¥");
 id('tutorialBackBtn').onclick=prevTutorialStep;
 id('skipTutorialTopBtn').textContent=t("–°–∫—ñ–ø–Ω—É—Ç–∏ —Ç—É—Ç–æ—Ä—ñ–∞–ª");
 typeText(t(step.text),()=>onStepTextComplete());}
function onStepTextComplete(){const step=tutorialSteps[currentTutorialStep];id('tutorialNextBtn').style.display='inline-block';
 if(step.action==='click_clock'){id('tutorialNextBtn').style.display='none';const c=id('clickableClock');c.classList.add('click-effect-neon');c.onclick=()=>{c.onclick=null;c.classList.remove('click-effect-neon');nextTutorialStep();};}
 else if(step.action==='finish'){id('tutorialNextBtn').onclick=()=>endTutorial();}
 else{id('tutorialNextBtn').onclick=nextTutorialStep;}}
function nextTutorialStep(){currentTutorialStep++;showTutorialStep(currentTutorialStep);}
function prevTutorialStep(){if(currentTutorialStep>0){currentTutorialStep--;showTutorialStep(currentTutorialStep);}}
function endTutorial(skip=false){isTutorialActive=false;gameState.tutorialDone=true;id('tutorialOverlay').style.display='none';id('tutorialDialogue').style.display='none';id('skipTutorialTopBtn').style.display='none';qa('.highlighted-step').forEach(e=>{e.classList.remove('highlighted-step');e.style.zIndex='';e.style.position='';});if(!skip)showToast(t("–î—è–∫—É—é –∑–∞ —Ç–µ —â–æ –ø—Ä–æ–π—à–ª–∏ —Ç—É—Ç–æ—Ä—ñ–∞–ª, —Å–ø–æ–¥—ñ–≤–∞—é—Å—å –í–∞–º –±—É–ª–æ –∫–æ—Ä–∏—Å–Ω–æ —ñ –∑—Ä–æ–∑—É–º—ñ–ª–æ. –ì–∞—Ä–Ω–æ—ó –í–∞–º –≥—Ä–∏ —ñ –ø–∏—à—ñ—Ç—å –ø–æ —Ü—é –≥—Ä—É –≤ —Å–≤–æ—ó—Ö —Å–æ—Ü —Å–µ—Ç—è—Ö —è–∫—â–æ —Å–ø–æ–¥–æ–±–∞–ª–æ—Å—å. –ë—É–¥—É –¥—É–∂–µ –≤–¥—è—á–Ω–∏–π —ñ –∑–≤–µ—Ä—Ç–∞–π—Ç–µ—Å—è –¥–æ –º–æ—ó—Ö —Å–æ—Ü. —Å–µ—Ç–µ–π –¥–ª—è –ø—Ä–æ–ø–æ–Ω—É–≤–∞–Ω–Ω—è —á–æ–≥–æ—Å—å —Å–≤–æ–≥–æ"));saveGame();}

// === –ú–£–ó–ò–ö–ê ===
function updateMusicUI(){const isOwned=ownedTracks.includes(displayedTrackIndex),cost=displayedTrackIndex*3600;nowPlaying.textContent=isOwned?(currentTrack===displayedTrackIndex&&isPlaying?`${t("–ó–∞—Ä–∞–∑:")} ${trackNames[displayedTrackIndex]}`:`${t("–û–±—Ä–∞–Ω–æ:")} ${trackNames[displayedTrackIndex]}`):`${t("–ú–∞–≥–∞–∑–∏–Ω:")} ${trackNames[displayedTrackIndex]}`;if(!isOwned){musicBtn.innerHTML=`üí∞ ${t("–ö—É–ø–∏—Ç–∏ –∑–∞")} ${formatTime(cost)}`;musicBtn.style.background="linear-gradient(45deg, #f1c40f, #f39c12)";}else{musicBtn.style.background="";if(currentTrack===displayedTrackIndex&&isPlaying)musicBtn.textContent=t("–ó—É–ø–∏–Ω–∏—Ç–∏ –º—É–∑–∏–∫—É");else musicBtn.textContent=t("–í–∫–ª—é—á–∏—Ç–∏ –º—É–∑–∏–∫—É");}}
const trackNames=["Phonk #1","Phonk #2","Phonk #3","Phonk #4","Phonk #5","Phonk #6","Phonk #7"];
function initMusic(){const tracks=["asphalt-menace.mp3","digital-overdrive.mp3","drift-phonk-phonk-music-2-434611.mp3","drift-phonk-phonk-music-432222.mp3","phonk-music-409064 (2).mp3","phonk-music-phonk-2025-432208.mp3","pixel-drift.mp3"].map(x=>`musicList/${x}`);displayedTrackIndex=currentTrack;
 function loadTrack(i){player.src=tracks[i];}loadTrack(currentTrack);
 player.addEventListener("ended",()=>{if(ownedTracks.length>1){let next;do{next=(currentTrack+1)%tracks.length;}while(!ownedTracks.includes(next));currentTrack=next;displayedTrackIndex=next;loadTrack(currentTrack);player.play();updateMusicUI();}else{player.currentTime=0;player.play();}});
 musicBtn.addEventListener("click",()=>{if(ownedTracks.includes(displayedTrackIndex)){if(currentTrack!==displayedTrackIndex){currentTrack=displayedTrackIndex;loadTrack(currentTrack);isPlaying=1;player.volume=(gameState.vol||45)/100;player.play().catch(()=>{});}else{if(!isPlaying){isPlaying=1;player.volume=(gameState.vol||45)/100;player.play().catch(()=>{});}else{isPlaying=0;player.pause();}}}else{const cost=displayedTrackIndex*3600;if(score>=cost){score-=cost;ownedTracks.push(displayedTrackIndex);showToast(t("–ö—É–ø–ª–µ–Ω–æ:")+" üéµ");updateScore();saveGame();}else{showToast(t("–ù–µ –≤–∏—Å—Ç–∞—á–∞—î —á–∞—Å—É!"));}}updateMusicUI();});
 prevTrack.onclick=()=>{displayedTrackIndex=(displayedTrackIndex-1+tracks.length)%tracks.length;updateMusicUI();};nextTrack.onclick=()=>{displayedTrackIndex=(displayedTrackIndex+1)%tracks.length;updateMusicUI();};updateMusicUI();}

// === –Ü–ì–†–û–í–Ü –ú–ï–•–ê–ù–Ü–ö–ò ===
function initClickHandler(){let lastClick=0;clockWrapper.addEventListener("click",evt=>{const now=Date.now();if(now-lastClick<50)return;lastClick=now;if(evt.target.closest("#clickableClock")||evt.target===clockWrapper)addTime();});}
function addTime(){const g=Math.round(clickPower*clickMultiplier*prestigeMultiplier);score+=g;clickCloudTotal+=g;if(g>maxPerClick)maxPerClick=g;clickGainEl.innerHTML=`+${formatTime(g)}`;showFloating(`+${formatTime(g)}`);triggerClickEffect();handleClickCombo();updateScore();updatePrestigeProgress();}
function handleClickCombo(){const n=Date.now();if(n-lastClickTime<MAX_CLICK_INTERVAL)currentCombo++;else currentCombo=1;lastClickTime=n;if(currentCombo>maxComboEver)maxComboEver=currentCombo;if(currentCombo>=COMBO_THRESHOLD){comboCount.textContent=currentCombo;comboBubble.classList.add("show");}clearTimeout(comboTimeout);comboTimeout=setTimeout(()=>{if(currentCombo>=COMBO_THRESHOLD){comboBubble.classList.add("burst");showToast(`${t("–ö–æ–º–±–æ")} √ó${currentCombo}! üî•`);setTimeout(()=>comboBubble.classList.remove("show","burst"),700);}currentCombo=0;},300);}
function triggerClickEffect(){if(!animationsEnabled)return;clock.classList.remove("click-effect-red","click-effect-blue","click-effect-glitch","click-effect-blackhole","click-effect-ripple");void clock.offsetWidth;clock.classList.add("click-effect-"+current.effect);}
function showToast(t){const toastEl=d.createElement("div");toastEl.className="toast";toastEl.textContent=t;toastEl.style.cssText="font-size:18px;padding:22px 48px";toastContainer.appendChild(toastEl);setTimeout(()=>toastEl.remove(),1e4);}
function showFloating(t){if(!animationsEnabled)return;const floatEl=d.createElement("div");floatEl.textContent=t;floatEl.style.cssText="position:absolute;right:20px;top:50px;color:#ffccd1;font-weight:700;opacity:1;transition:all 0.9s ease-out";clockWrapper.appendChild(floatEl);requestAnimationFrame(()=>{floatEl.style.transform="translateX(60px) translateY(-80px)";floatEl.style.opacity="0";});setTimeout(()=>floatEl.remove(),920);}

// === –ê–ü–ì–†–ï–ô–î–ò ===
const upgrades=[{n:"–ö–ª—ñ–ø–∞—Ç–∏ –æ—á–∏–º–∞",c:1,l:0},{n:"–£–≤—ñ–º–∫–Ω—É—Ç–∏ —Ç–µ–ª–µ—Ñ–æ–Ω",c:8,l:0},{n:"–ì–æ—Ä—Ç–∞—Ç–∏ —Å—Ç—Ä—ñ—á–∫—É",c:40,l:0},{n:"–ú–µ–º-—Ç—É—Ä",c:200,l:0},{n:"–ê–≤—Ç–æ–ø–µ—Ä–µ–≥–ª—è–¥",c:1100,l:0},{n:"–ü—ñ–¥–ø–∏—Å–∫–∞",c:6500,l:0},{n:"–°–µ—Ä—ñ–∞–ª-–º–∞—Ä–∞—Ñ–æ–Ω",c:40000,l:0},{n:"–†–æ–±–æ—Ç–∞ –∑ –¥–µ–¥–ª–∞–π–Ω–æ–º",c:250000,l:0},{n:"–ñ–∏—Ç—Ç—î–≤–∏–π –∫—Ä—ñ–Ω–∂",c:1600000,l:0},{n:"Discord-–º–∞—Ä–∞—Ñ–æ–Ω",c:10000000,l:0},{n:"Reels –¥–æ —Ä–∞–Ω–∫—É",c:65000000,l:0},{n:"–§—ñ–ª–æ—Å–æ—Ñ—Å—å–∫—ñ —Ä–æ–∑–¥—É–º–∏",c:400000000,l:0}];
function fib(n){if(n<=1)return n;let a=0,b=1;for(let i=2;i<=n;i++)[a,b]=[b,a+b];return b;}
function initUpgrades(){upgrades.forEach((u,i)=>{const b=d.createElement("button");b.className="upgrade-btn";if(i>0)b.classList.add("hidden");b.addEventListener("click",()=>buyUpgrade(i));upgradesContainer.appendChild(b);buttons.push(b);u.up=function(){const f=fib(u.l+6),c=Math.floor(u.c*f*(i+1));b.innerHTML=`${t(u.n)} (Lv.${u.l})<span>${formatTime(c)}</span>`;b.disabled=score<c;};u.getC=function(){return Math.floor(u.c*fib(u.l+6)*(i+1));};u.up();});}
function revealNext(){const c=upgrades.filter(u=>u.l>0).length;if(buttons[c])buttons[c].classList.remove("hidden");}
function revealPurchasedUpgrades(){upgrades.forEach((u,i)=>{if(u.l>0&&buttons[i])buttons[i].classList.remove("hidden");});revealNext();}
function buyUpgrade(i){const u=upgrades[i],c=u.getC();if(score<c)return;score-=c;u.l++;totalUpgradesBought++;autoRate=0;upgrades.forEach((upg,idx)=>{if(upg.l>0){let fibSum=0;for(let lvl=1;lvl<=upg.l;lvl++){fibSum+=fib(lvl+2);}autoRate+=fibSum*(idx+1);}});
 showToast(`${t("–ö—É–ø–ª–µ–Ω–æ:")} ${t(u.n)} (Lv.${u.l}) ‚úÖ`);
 if(i===1)setTimeout(()=>showPhoneLockScreen(),500);if(i===2)setTimeout(()=>handleNewsFeedUpgrade(),300);if(i===3)setTimeout(()=>showMeme(),300);if(i===4)setTimeout(()=>showAutoplay(),300);if(i===5)setTimeout(()=>showSubscription(),300);if(i===6)setTimeout(()=>showSeriesMarathon(),300);if(i===7)setTimeout(()=>showDeadlineWork(),300);if(i===8)setTimeout(()=>showCringe(),300);if(i===9)setTimeout(()=>showDiscord(),300);if(i===10)setTimeout(()=>showReels(),300);if(i===11)setTimeout(()=>showPhilosophy(),300);
 requestAnimationFrame(()=>{revealNext();u.up();updateAllButtons();updateScore();updateStats();updateAchievements();updatePrestigeProgress();});if(i===0){d.body.classList.remove("eye-blink");void d.body.offsetWidth;d.body.classList.add("eye-blink");setTimeout(()=>d.body.classList.remove("eye-blink"),1000);}saveGame();}
function updateAllButtons(){upgrades.forEach(u=>u.up());multipliers.forEach(m=>m.up&&m.up());}
// === –ú–ù–û–ñ–ù–ò–ö–ò ===
const multipliers=[{n:"–ü–æ–¥–≤—ñ–π–Ω–∏–π –∫–ª—ñ–∫",c:5000,m:2,b:0},{n:"–ü–æ—Ç—Ä—ñ–π–Ω–∏–π –∫–ª—ñ–∫",c:50000,m:3,b:0},{n:"x10 –∑–∞ –∫–ª—ñ–∫",c:1000000,m:10,b:0},{n:"x50 –∑–∞ –∫–ª—ñ–∫",c:20000000,m:50,b:0},{n:"x100 –∑–∞ –∫–ª—ñ–∫",c:100000000,m:100,b:0}];
function initMultipliers(){multipliers.forEach((m,idx)=>{const b=d.createElement("button");b.className="upgrade-btn multiplier-btn";function upB(){if(m.b){b.remove();return;}const a=score>=m.c;b.innerHTML=`${t(m.n)}<span>${formatTime(m.c)}</span>`;b.disabled=!a;b.style.background=a?"":"#334155";b.style.opacity=a?"1":"0.5";}b.addEventListener("click",()=>{if(score<m.c||m.b)return;requestAnimationFrame(()=>{score-=m.c;m.b=1;clickMultiplier=m.m;showToast(`${t("–ö—É–ø–ª–µ–Ω–æ:")} ${t(m.n)}!`);upB();updateScore();updateStats();saveGame();});},{passive:true});multipliersContainer.appendChild(b);m.up=upB;upB();});}

// === UI –¢–ê –§–û–†–ú–ê–¢–£–í–ê–ù–ù–Ø ===
function updateScore(){scoreText.innerHTML=`${t("–ß–∞—Å—É –≤–∏—Ç—Ä–∞—á–µ–Ω–æ:")} ${formatTime(score)}`;cloudTotalEl.innerHTML=`${formatTime(clickCloudTotal)}`;updateAllButtons();if(window.musicBtn)musicBtn.dispatchEvent(new Event('check'));}
function updateStats(){realTimePlayedEl.textContent=formatTime((Date.now()-sessionStart)/1000);virtualTimeEl.textContent=formatTime(score);totalUpgradesEl.textContent=totalUpgradesBought;maxPerClickEl.textContent=formatTime(maxPerClick);prestigeMultEl.textContent=prestigeMultiplier.toFixed(2);id("maxAutoRate").textContent=formatTime(autoRate);id("maxCombo").textContent=maxComboEver;id("totalReverbs").textContent=totalReverbs;const a=achievementsList.filter(x=>x.done).length;id("achievedCount").textContent=a;id("totalAchievements").textContent=achievementsList.length;id("shapeSkinsCount").textContent=ownedSkins.shapes.length;id("clockSkinsCount").textContent=ownedSkins.clockSkins.length;id("handSkinsCount").textContent=ownedSkins.handSkins.length;id("effectSkinsCount").textContent=ownedSkins.effects.length;id("totalSkins").textContent=ownedSkins.shapes.length+ownedSkins.clockSkins.length+ownedSkins.handSkins.length+ownedSkins.effects.length;updateReverbText();updatePrestigeProgress();}
function formatTime(s){s=Math.floor(s);const u=gameState.lang==='uk'?[{n:" —Ç–∏—Å",v:31536e6},{n:" —Å—Ç",v:31536e5},{n:" –¥–µ—Å",v:31536e4},{n:" —Ä",v:31536e3},{n:" –º—ñ—Å",v:2592e3},{n:" –¥–Ω",v:86400},{n:" –≥–æ–¥",v:3600},{n:" —Ö–≤",v:60},{n:" —Å–µ–∫",v:1}]:[{n:" mil",v:31536e6},{n:" cen",v:31536e5},{n:" dec",v:31536e4},{n:" y",v:31536e3},{n:" mo",v:2592e3},{n:" d",v:86400},{n:" h",v:3600},{n:" m",v:60},{n:" s",v:1}];let r=s,p=[];for(const x of u){const a=Math.floor(r/x.v);if(a>0){p.push(`${a}${x.n}`);r%=x.v;}}return p.length?p.join(" "):`${s}${u[8].n}`;}
// === –î–û–°–Ø–ì–ù–ï–ù–ù–Ø ===
let achievementsList=[];
function initAchievements(){achievementsList=[{t:"–ü–µ—Ä—à–∏–π –∫–ª—ñ–∫",tg:1,g:()=>clickCloudTotal,done:false},{t:"100 —Å–µ–∫",tg:100,g:()=>score,done:false},{t:"–ü–µ—Ä—à–∞ –ø–æ–∫—É–ø–∫–∞",tg:1,g:()=>totalUpgradesBought,done:false},{t:"–ê–≤—Ç–æ –∑–∞–ø—É—â–µ–Ω–æ",tg:1,g:()=>autoRate>0?1:0,done:false},{t:"–ö–æ–º–±–æ-–º–∞–π—Å—Ç–µ—Ä",tg:50,g:()=>maxComboEver,done:false},{t:"–ú–∞–π—Å—Ç–µ—Ä —Ñ–æ—Ä–º",tg:3,g:()=>ownedSkins.shapes.length,done:false},{t:"–ì–æ—Å–ø–æ–¥–∞—Ä —Ä–∞–º–æ–∫",tg:3,g:()=>ownedSkins.clockSkins.length,done:false},{t:"–ö–æ–ª–µ–∫—Ü—ñ–æ–Ω–µ—Ä —Å—Ç—Ä—ñ–ª–æ–∫",tg:3,g:()=>ownedSkins.handSkins.length,done:false},{t:"–ú–∞–≥ –µ—Ñ–µ–∫—Ç—ñ–≤",tg:3,g:()=>ownedSkins.effects.length,done:false},{t:"–°—Ç–∏–ª—å–Ω–∏–π",tg:1,g:()=>(current.shape!=="round"||current.clock!=="neon-blue")?1:0,done:false}];const achRoot=id("achievements");achRoot.innerHTML='';achievementsList.forEach(a=>{const achEl=d.createElement("div");achEl.className="achievement";achEl.innerHTML=`<strong>${t(a.t)}</strong><div class="ach-progress"></div><div class="ach-state">0%</div>`;achRoot.appendChild(achEl);a.p=achEl.querySelector(".ach-progress");a.s=achEl.querySelector(".ach-state");});}
function updateAchievements(){achievementsList.forEach(a=>{const v=a.g(),p=Math.min(100,(v/a.tg)*100);a.p&&(a.p.style.width=p+"%");if(p>=100&&!a.done){a.done=true;if(a.s){a.s.textContent="‚úÖ";a.s.style.color="#8df299"};if(!firstAchievementsCheck)showToast(`${t("–î–æ—Å—è–≥–Ω–µ–Ω–Ω—è:")} ${t(a.t)} ‚úÖ`);}else if(p<100&&a.s)a.s.textContent=Math.floor(p)+"%";});if(firstAchievementsCheck)firstAchievementsCheck=false;}
// === –°–ö–Ü–ù–ò ===
const clockSkins=[{id:"neon-blue",n:"–ù–µ–æ–Ω —Å–∏–Ω—ñ–π",p:0},{id:"purple",n:"–ü—É—Ä–ø—É—Ä–Ω–∏–π",p:64800},{id:"pink",n:"–†–æ–∂–µ–≤–∏–π",p:129600},{id:"black",n:"–ß–æ—Ä–Ω–∏–π",p:259200}],
shapes=[{id:"round",n:"–ö—Ä—É–≥",p:0},{id:"square",n:"–ö–≤–∞–¥—Ä–∞—Ç",p:28800},{id:"diamond",n:"–†–æ–º–±",p:86400},{id:"oval",n:"–û–≤–∞–ª",p:172800}],
handSkins=[{id:"darkblue",n:"–¢–µ–º–Ω–æ-—Å–∏–Ω—ñ",p:0},{id:"pixel",n:"–ü—ñ–∫—Å–µ–ª—å–Ω—ñ",p:900},{id:"neon",n:"–ù–µ–æ–Ω–æ–≤—ñ",p:9000},{id:"chrome",n:"–•—Ä–æ–º",p:43200}],
effects=[{id:"red",n:"–ß–µ—Ä–≤–æ–Ω–∏–π —Å–ø–∞–ª–∞—Ö",p:0},{id:"blue",n:"–°–∏–Ω—ñ–π –≤–∏–±—É—Ö",p:21600},{id:"glitch",n:"–ì–ª—ñ—Ç—á",p:108000},{id:"blackhole",n:"–ß–æ—Ä–Ω–∞ –¥—ñ—Ä–∞",p:360000},{id:"ripple",n:"–•–≤–∏–ª—è —á–∞—Å—É",p:720000}];
let ownedSkins={shapes:["round"],clockSkins:["neon-blue"],handSkins:["darkblue"],effects:["red"]},current={shape:"round",clock:"neon-blue",hand:"darkblue",effect:"red"};
function buySkin(t,i,p,n){if(ownedSkins[t].includes(i)){current[t==="shapes"?"shape":t==="clockSkins"?"clock":t==="handSkins"?"hand":"effect"]=i;applyAllSkins();refreshAllSkinGrids();return showToast(t("–ó–±–µ—Ä–µ–∂–µ–Ω–æ!"))}if(score<p)return showToast(t("–ù–µ –≤–∏—Å—Ç–∞—á–∞—î —á–∞—Å—É!"));score-=p;ownedSkins[t].push(i);current[t==="shapes"?"shape":t==="clockSkins"?"clock":t==="handSkins"?"hand":"effect"]=i;applyAllSkins();updateScore();updateStats();updateAchievements();updatePrestigeProgress();showToast(`${t("–ö—É–ø–ª–µ–Ω–æ:")} ${t(n)} ‚úÖ`);refreshAllSkinGrids();saveGame();}
function applyAllSkins(){qa('.clock').forEach(c=>c.className="clock "+current.shape);
 const c=current.clock;const cl=c==="neon-blue"?"#0ea5e9":c==="purple"?"#8b5cf6":c==="pink"?"#ec4899":"#111";
 qa('.clock').forEach(el=>{el.style.borderColor=cl;el.style.boxShadow=`0 0 50px ${cl}, 0 0 100px ${cl}`;});
}
function createSkinGrid(ct,ls,type){const r=id(ct);r.innerHTML="";ls.forEach(s=>{const skinEl=d.createElement("div");skinEl.className="skin";skinEl.textContent=t(s.n);const o=ownedSkins[type].includes(s.id);const a=current[type==="shapes"?"shape":type==="clockSkins"?"clock":type==="handSkins"?"hand":"effect"]===s.id;if(o){skinEl.classList.add("owned");if(a)skinEl.classList.add("active");skinEl.onclick=()=>{current[type==="shapes"?"shape":type==="clockSkins"?"clock":type==="handSkins"?"hand":"effect"]=s.id;applyAllSkins();refreshAllSkinGrids();showToast("OK!");}}else{skinEl.style.opacity="0.4";if(score>=s.p){skinEl.style.opacity="1";skinEl.style.boxShadow="0 0 15px #0ff"}skinEl.innerHTML+=`<br><small style="color:#ff00ff">${formatTime(s.p)}</small>`;skinEl.onclick=()=>buySkin(type,s.id,s.p,s.n)}r.appendChild(skinEl)})}
function refreshAllSkinGrids(){createSkinGrid("shapeSkins",shapes,"shapes");createSkinGrid("clockSkins",clockSkins,"clockSkins");createSkinGrid("handSkins",handSkins,"handSkins");createSkinGrid("effectSkins",effects,"effects")}
function updateSkinHighlights(){/* –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—ñ–¥—Å–≤—ñ—Ç–∫–∏ */}
function initSkins(){refreshAllSkinGrids();applyAllSkins();}
// === –ì–û–î–ò–ù–ù–ò–ö –¢–ê –†–ï–í–ï–†–ë ===
function updateClockHands(){const n=new Date();let s=n.getSeconds()+n.getMilliseconds()/1000,m=n.getMinutes()+s/60,h=(n.getHours()%12||12)+m/60;if(reverseClockHands){s=60-s;m=60-m;h=12-h;if(h<=0)h+=12;}qa("#clickableClock .second").forEach(x=>x.style.transform=`translateX(-50%) rotate(${s*6}deg)`);qa("#clickableClock .minute").forEach(x=>x.style.transform=`translateX(-50%) rotate(${m*6}deg)`);qa("#clickableClock .hour").forEach(x=>x.style.transform=`translateX(-50%) rotate(${h*30}deg)`);}
function updatePrestigeProgress(){currentPrestigeProgress=score;const pB=id('prestigeProgressBar'),pT=id('prestigeProgressText'),pP=Math.min(100,(currentPrestigeProgress/prestigeThreshold)*100);if(pB){pB.style.width=pP+'%';pB.style.background=pP>=100?'linear-gradient(90deg, #10b981, #34d399)':pP>=50?'linear-gradient(90deg, #f59e0b, #fbbf24)':'linear-gradient(90deg, #ef4444, #f87171)';}if(pT)pT.innerHTML=`${formatTime(currentPrestigeProgress)} / ${formatTime(prestigeThreshold)}`;updateReverbButtonState();}
function updateReverbButtonState(){const c=currentPrestigeProgress>=prestigeThreshold;reverbBtn.disabled=!c;reverbBtn.style.opacity=c?'1':'0.6';reverbBtn.style.cursor=c?'pointer':'not-allowed';reverbBtn.style.background=c?'linear-gradient(90deg, #10b981, #34d399)':'linear-gradient(90deg, #6b7280, #9ca3af)';}
function updateReverbText(){qa("#nextMultiplier").forEach(el=>el.textContent=(prestigeMultiplier*1.2).toFixed(2));qa('#nextMultiplierFooter').forEach(el=>el.textContent=(prestigeMultiplier*1.2).toFixed(2));}
const restartEffect={active:!1,clocksInt:null,bubblesInt:null,init(){const effectOverlay=d.createElement("div");effectOverlay.id="restartEffectOverlay";effectOverlay.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;z-index:10000;display:none;pointer-events:none;background:transparent;";d.body.appendChild(effectOverlay);this.clocksContainer=d.createElement("div");this.clocksContainer.style.cssText="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;";this.bubblesContainer=d.createElement("div");this.bubblesContainer.style.cssText="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;";effectOverlay.appendChild(this.clocksContainer);effectOverlay.appendChild(this.bubblesContainer);this.completionScreen=d.createElement("div");this.completionScreen.id="reverbCompletionScreen";this.completionScreen.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;background:#000;z-index:10002;display:none;align-items:center;justify-content:center;flex-direction:column;color:white;font-family:Poppins;text-align:center;";this.completionScreen.innerHTML=`<div style="font-size:32px;margin-bottom:20px;text-shadow:0 0 20px #0ea5e9">${t("–£—Å–ø—ñ—Ö!")}</div><div style="font-size:24px;margin-bottom:20px">New Multiplier: ${prestigeMultiplier.toFixed(2)}√ó</div><div style="font-size:18px;color:#cfeaff">${t("–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏")}</div>`;d.body.appendChild(this.completionScreen);},start(){this.active=!0;id("restartEffectOverlay").style.display="block";this.clocksContainer.innerHTML="";this.bubblesContainer.innerHTML="";this.clocksInt=setInterval(()=>this.createFlyingClock(),300);this.bubblesInt=setInterval(()=>this.createStatBubble(),1200)},stop(){this.active=!1;clearInterval(this.clocksInt);clearInterval(this.bubblesInt);id("restartEffectOverlay").style.display="none"},showCompletionScreen(){reverbOverlay.classList.add("hidden");id("restartEffectOverlay").style.display="none";timeTunnel.classList.remove("active","intense");this.completionScreen.style.display="flex";},hideCompletionScreen(){this.completionScreen.style.display="none"},createFlyingClock(){if(!animationsEnabled)return;const flyingClock=d.createElement("div");flyingClock.className="flying-clock";const t=80+100*Math.random();flyingClock.style.width=flyingClock.style.height=t+"px";flyingClock.style.left=Math.random()*100+"%";flyingClock.style.top=Math.random()*100+"%";flyingClock.style.animationDuration=4+6*Math.random()+"s";flyingClock.style.animationDelay=0.5*Math.random()+"s";Math.random()>0.5&&(flyingClock.style.transform="scaleX(-1)");this.clocksContainer.appendChild(flyingClock);setTimeout(()=>{flyingClock.parentNode&&flyingClock.parentNode.removeChild(flyingClock)},1e4)},createStatBubble(){if(!animationsEnabled)return;const bubble=d.createElement("div");bubble.className="stat-bubble";const t=[`Combo: ${maxComboEver||0}`,`Time: ${formatTime(clickCloudTotal)}`,`Reverbs: ${totalReverbs}`,`Skins: ${(ownedSkins.shapes.length+ownedSkins.clockSkins.length+ownedSkins.handSkins.length+ownedSkins.effects.length)||0}`];bubble.textContent=t[Math.floor(Math.random()*t.length)];bubble.style.left=10+80*Math.random()+"%";bubble.style.top=20+60*Math.random()+"%";this.bubblesContainer.appendChild(bubble);setTimeout(()=>{bubble.parentNode&&bubble.parentNode.removeChild(bubble)},4e3)}};
function startReverbMode(){const qr=document.querySelector('.bare-qr');if(qr)qr.style.display='none';reverbOverlay.classList.remove("hidden");timeTunnel.classList.add("active");reverbHint.style.opacity="1";isReverbActive=1;reverbClock.className=`clock ${current.shape}`;clockSkins.find(s=>s.id===current.clock)?.a();handSkins.find(s=>s.id===current.hand)?.a();updateReverbClockHands();setTimeout(()=>reverbHint.style.opacity="0",3000);}
function startReverbHold(evt){if(evt.type.includes('touch'))evt.preventDefault();if(!isReverbActive)return;reverbHint.style.opacity="0";reverbClock.classList.add("reverb-mode","reverb-chaos");timeTunnel.classList.add("intense");restartEffect.start();if(animationsEnabled){qa("#reverbClock .hand").forEach((h,i)=>{const o=0.5+2*Math.random(),n=Math.random()>0.5?"normal":"reverse";h.style.setProperty("--duration",`${o}s`);h.style.setProperty("--direction",n);h.style.animation=`chaosSpin ${o}s linear infinite ${n}`;});}reverbHoldTimeout=setTimeout(completeReverb,10000);}
function stopReverbHold(evt){if(evt&&evt.type.includes('touch'))evt.preventDefault();clearTimeout(reverbHoldTimeout);if(isReverbActive){reverbClock.classList.remove("reverb-mode","reverb-chaos");timeTunnel.classList.remove("intense");qa("#reverbClock .hand").forEach(h=>{h.style.animation="none";h.style.removeProperty("--duration");h.style.removeProperty("--direction");});updateReverbClockHands();restartEffect.stop();}}
reverbClock.addEventListener("mousedown",startReverbHold);reverbClock.addEventListener("touchstart",startReverbHold,{passive:false});
reverbClock.addEventListener("mouseup",stopReverbHold);reverbClock.addEventListener("mouseleave",stopReverbHold);
reverbClock.addEventListener("touchend",stopReverbHold);reverbClock.addEventListener("touchcancel",stopReverbHold);
function completeReverb(){if(currentPrestigeProgress<prestigeThreshold){showToast(`${t("–ù–µ –≤–∏—Å—Ç–∞—á–∞—î —á–∞—Å—É!")} ${t("–¢—Ä–µ–±–∞ —â–µ")} ${formatTime(prestigeThreshold - currentPrestigeProgress)}`);return;}stopReverbHold(new Event('manual'));achievementsList.forEach(a=>(a.done=false,a.s&&(a.s.textContent="0%"),a.p&&(a.p.style.width="0%")));ownedSkins={shapes:["round"],clockSkins:["neon-blue"],handSkins:["darkblue"],effects:["red"]};current={shape:"round",clock:"neon-blue",hand:"darkblue",effect:"red"};prestigeThreshold+=7200;prestigeMultiplier*=1.2;totalReverbs++;currentPrestigeProgress=score=clickCloudTotal=currentCombo=0;clickPower=maxPerClick=1;autoRate=totalUpgradesBought=0;upgrades.forEach((u,idx)=>(u.l=0,buttons[idx]&&buttons[idx].classList[idx?"add":"remove"]("hidden"),u.up()));multipliers.forEach(m=>m.b=0);clickMultiplier=1;multipliersContainer.innerHTML='';initMultipliers();const flashEl=d.createElement("div");flashEl.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;background:white;z-index:10001;pointer-events:none;animation:flashFade 1s ease-out forwards;";d.body.appendChild(flashEl);setTimeout(()=>{flashEl.remove();restartEffect.showCompletionScreen();restartEffect.completionScreen.querySelector("div:nth-child(2)").textContent=`Multiplier: ${prestigeMultiplier.toFixed(2)}√ó`;updateReverbText();const continueHandler=()=>{restartEffect.hideCompletionScreen();isReverbActive=0;if(keepMusicOnPrestige&&!isPlaying){isPlaying=1;player.play().catch(()=>{});musicBtn.textContent="‚è∏ Stop";}updateScore();updateStats();updateAchievements();refreshAllSkinGrids();applyAllSkins();saveConstellation();const qr=document.querySelector('.bare-qr');if(qr)qr.style.display='block';d.removeEventListener('click',continueHandler);d.removeEventListener('touchstart',continueHandler);saveGame();};d.addEventListener('click',continueHandler);d.addEventListener('touchstart',continueHandler);},1000);setTimeout(()=>showConstellationAfterRebirth(),2000);}

// === –°–ï–ö–†–ï–¢–ù–ê –°–ò–°–¢–ï–ú–ê ===
function initSecretSystem(){if(!worldTitle)return;worldTitle.addEventListener("keydown",evt=>{if(evt.key==="Enter")evt.preventDefault();});const normalizeTitle=()=>{let t=worldTitle.textContent.trim();if(!t)worldTitle.textContent="Times Clicker";else if(!/\sTime$/i.test(t))worldTitle.textContent=`${t} Time`;};let titleCheckTimeout=null;const checkTitleForSecret=()=>{const t=worldTitle.textContent.trim().replace(/\s+/g,'');if(/^22092005$/i.test(t)){if(!id("ultimateDevPanel")){showToast("Access Granted!");createDevPanel();}if(titleCheckTimeout)clearTimeout(titleCheckTimeout);titleCheckTimeout=null;return;}clearTimeout(titleCheckTimeout);titleCheckTimeout=setTimeout(checkTitleForSecret,800);};worldTitle.addEventListener("blur",()=>{normalizeTitle();checkTitleForSecret();});checkTitleForSecret();let secretCode="",magicCode="22092005";d.addEventListener("keydown",evt=>{secretCode+=evt.key;if(secretCode.length>8)secretCode=secretCode.slice(-8);if(secretCode===magicCode){secretCode="";showToast("DevMode On!");createDevPanel();}});}
function createDevPanel(){if(id("ultimateDevPanel"))return;const p=d.createElement("div");p.id="ultimateDevPanel";p.style.cssText="position:fixed;bottom:20px;left:20px;z-index:99999;background:rgba(0,0,0,0.9);backdrop-filter:blur(12px);border:2px solid #ff00ff;border-radius:14px;padding:12px 16px;box-shadow:0 0 30px #ff00ff;font-family:Poppins,sans-serif;color:#fff;font-size:13px;width:210px;";p.innerHTML='<div style="color:#ff00ff;font-weight:700;text-align:center;margin-bottom:8px;font-size:14px;">Dev Panel</div>';function addBtn(t,c,a){const b=d.createElement("button");b.textContent=t;b.style.cssText="margin:4px 0;padding:8px 12px;width:100%;background:"+c+";border:none;border-radius:10px;color:#fff;font-weight:600;cursor:pointer;font-size:12px;transition:transform 0.2s;";b.onmouseover=()=>b.style.transform="translateY(-2px)";b.onmouseout=()=>b.style.transform="";b.onclick=()=>{a();showToast(t+" OK");};p.appendChild(b);}addBtn("+10 –≥–æ–¥–∏–Ω–∏","#06d6d6",()=>{score+=36000;clickCloudTotal+=36000;updateScore();updateStats();});addBtn("+100 –∞–≤—Ç–æ/—Å–µ–∫","#3b82f6",()=>autoRate+=100);addBtn("√ó2 –ø—Ä–µ—Å—Ç–∏–∂","#a855f7",()=>{prestigeMultiplier*=2;updateStats();});addBtn("–†–µ–≤–µ—Ä–±","#ec4899",()=>completeReverb());addBtn("–ó–∞–∫—Ä–∏—Ç–∏","#555",()=>{p.remove();showToast("–ü–∞–Ω–µ–ª—å –∑–∞–∫—Ä–∏—Ç–∞");});d.body.appendChild(p);}
function saveGame(){updateState();saveConstellation();localStorage.setItem('timeClickerSave',JSON.stringify(gameState));showSaveStatus(t("–ó–±–µ—Ä–µ–∂–µ–Ω–æ!"),'success');}
function loadGame(){let s=localStorage.getItem('timeClickerSave');if(s){try{let l=JSON.parse(s);applyState(l);return true;}catch(e){console.error('Error loading:',e);}}return false;}
function updateState(){gameState.s=score;gameState.p=clickPower;gameState.a=autoRate;gameState.u=totalUpgradesBought;gameState.m=maxPerClick;gameState.pm=prestigeMultiplier;gameState.tr=totalReverbs;gameState.ma=maxAutoRate;gameState.mc=maxComboEver;gameState.cct=clickCloudTotal;gameState.pt=prestigeThreshold;gameState.cpp=currentPrestigeProgress;gameState.cm=clickMultiplier;gameState.vol=parseInt(id('volumeSlider')?.value)||45;gameState.rev=id('reverseHands')?.checked||false;gameState.anim=!(id('disableAnimations')?.checked||false);gameState.ul=upgrades.map(u=>u.l);gameState.mb=multipliers.map(m=>m.b);gameState.ownedSkins=ownedSkins;gameState.currentSkins=current;gameState.ot=ownedTracks;gameState.lang=gameState.lang||'uk';gameState.tutorialDone=gameState.tutorialDone||false;}
const applyState = loadedState => !loadedState ? false : (score = loadedState.s || score, clickPower = loadedState.p || clickPower, autoRate = loadedState.a || autoRate, totalUpgradesBought = loadedState.u || totalUpgradesBought, maxPerClick = loadedState.m || maxPerClick, prestigeMultiplier = loadedState.pm || prestigeMultiplier, totalReverbs = loadedState.tr || totalReverbs, maxAutoRate = loadedState.ma || maxAutoRate, maxComboEver = loadedState.mc || maxComboEver, clickCloudTotal = loadedState.cct || clickCloudTotal, prestigeThreshold = loadedState.pt || prestigeThreshold, currentPrestigeProgress = loadedState.cpp || currentPrestigeProgress, clickMultiplier = loadedState.cm || clickMultiplier, gameState.lang = loadedState.lang || 'uk', gameState.tutorialDone = loadedState.tutorialDone || false, loadedState.ul && upgrades.forEach((u,i) => u.l = loadedState.ul[i] || 0), loadedState.mb && multipliers.forEach((m,i) => m.b = loadedState.mb[i] || false), loadedState.ot ? ownedTracks = loadedState.ot : ownedTracks = [0], (loadedState.ownedSkins ? ownedSkins = loadedState.ownedSkins : ownedSkins = {shapes: ["round"], clockSkins: ["neon-blue"], handSkins: ["darkblue"], effects: ["red"]}), (loadedState.currentSkins ? current = loadedState.currentSkins : current = {shape: "round", clock: "neon-blue", hand: "darkblue", effect: "red"}), autoRate = 0, upgrades.forEach((upg, idx) => {if(upg.l>0){let fibSum=0;for(let lvl=1;lvl<=upg.l;lvl++){fibSum+=fib(lvl+2);}autoRate+=fibSum*(idx+1);}}), clickMultiplier = multipliers.reduce((h,m) => m.b && m.m > h ? m.m : h, 1), achievementsList.forEach(a => a.done = false), revealPurchasedUpgrades(), updateAllButtons(), refreshAllSkinGrids(), applyAllSkins(), updateScore(), updateStats(), updatePrestigeProgress(), updateReverbText(), updateAchievements(), loadConstellation(), true);
function showSaveStatus(msg,type){let el=id('saveStatus');if(el){el.textContent=msg;el.className='save-status '+(type||'info');setTimeout(()=>{el.textContent='';el.className='save-status';},3000);}}
function exportData(){updateState();let data=btoa(encodeURIComponent(JSON.stringify(gameState)));let area=id('exportImportArea');area.value=data;area.select();document.execCommand('copy');showSaveStatus(t("–°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ!"),'success');}
function importData(){let area=id('exportImportArea');if(!area.value.trim()){showSaveStatus(t("–ü—É—Å—Ç–æ!"),'error');return;}try{let imported=JSON.parse(decodeURIComponent(atob(area.value)));if(confirm('Overwrite progress?')){applyState(imported);saveGame();showSaveStatus(t("–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ!"),'success');}}catch(e){showSaveStatus(t("–ü–æ–º–∏–ª–∫–∞!"),'error');}}
function resetProgress(){if(confirm(t("–°–∫–∏–Ω—É—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å?"))){localStorage.removeItem('timeClickerSave');localStorage.removeItem('timeClickerConstellation');score=0;clickPower=1;autoRate=0;isPlaying=0;currentTrack=0;sessionStart=Date.now();totalUpgradesBought=0;maxPerClick=1;prestigeMultiplier=1;totalReverbs=0;maxAutoRate=0;maxCombo=0;clickCloudTotal=0;lastClickTime=0;currentCombo=0;maxComboEver=0;comboTimeout=null;isReverbActive=0;reverbHoldTimeout=null;clickMultiplier=1;buttons=[];prestigeThreshold=3600;currentPrestigeProgress=0;reverseClockHands=false;animationsEnabled=true;firstAchievementsCheck=true;skillPoints=0;isConstellationVisible=false;ownedTracks=[0];upgrades.forEach(u=>u.l=0);multipliers.forEach(m=>m.b=0);multipliersContainer.innerHTML='';initMultipliers();ownedSkins={shapes:["round"],clockSkins:["neon-blue"],handSkins:["darkblue"],effects:["red"]};current={shape:"round",clock:"neon-blue",hand:"darkblue",effect:"red"};achievementsList.forEach(a=>{a.done=false;if(a.p)a.p.style.width="0%";if(a.s){a.s.textContent="0%";a.s.style.color="";}});resetConstellationSkills();initSkins();updateAllButtons();hideAllUpgradeButtons();updateScore();updateStats();updateAchievements();firstAchievementsCheck=false;location.reload();}}
function hideAllUpgradeButtons(){for(let i=1;i<buttons.length;i++){if(buttons[i])buttons[i].classList.add("hidden");}}
function resetConstellationSkills(){skillPoints=0;constellation.center.unlocked=false;constellation.center.level=0;[...constellation.hourHand.stars,...constellation.minuteHand.stars,...constellation.secondHand.stars].forEach(s=>s.unlocked=false);saveConstellation();}

// === –ú–Ü–ù–Ü-–Ü–ì–†–ò –¢–ê –û–í–ï–†–õ–ï–á ===
let phoneLockImages=['photoList/1.jpg','photoList/2.jpg','photoList/3.jpg','photoList/4.jpg','photoList/5.jpg','photoList/6.jpg','photoList/7.jpg','photoList/8.jpg','photoList/9.jpg','photoList/10.jpg'],phoneSwipe={startY:0,endY:0,isSwiping:false,hintTimeout:null};
function showPhoneLockScreen(){const randomIndex=Math.floor(Math.random()*phoneLockImages.length);const lockImage=id('phoneLockImage');lockImage.src=phoneLockImages[randomIndex];const overlay=id('phoneLockOverlay');overlay.style.display='flex';phoneSwipe.startY=0;phoneSwipe.endY=0;phoneSwipe.isSwiping=false;phoneSwipe.hintTimeout=setTimeout(()=>{id('swipeHint').classList.add('show');},10000);setupPhoneSwipeListeners();}
function hidePhoneLockScreen(){const overlay=id('phoneLockOverlay');overlay.style.display='none';id('swipeHint').classList.remove('show');if(phoneSwipe.hintTimeout){clearTimeout(phoneSwipe.hintTimeout);phoneSwipe.hintTimeout=null;}removePhoneSwipeListeners();}
function setupPhoneSwipeListeners(){const lockScreen=id('phoneLockScreen');lockScreen.addEventListener('mousedown',handleSwipeStart);lockScreen.addEventListener('mousemove',handleSwipeMove);lockScreen.addEventListener('mouseup',handleSwipeEnd);lockScreen.addEventListener('mouseleave',handleSwipeCancel);lockScreen.addEventListener('touchstart',handleSwipeStart,{passive:false});lockScreen.addEventListener('touchmove',handleSwipeMove,{passive:false});lockScreen.addEventListener('touchend',handleSwipeEnd);lockScreen.addEventListener('touchcancel',handleSwipeCancel);}
function removePhoneSwipeListeners(){const lockScreen=id('phoneLockScreen');lockScreen.removeEventListener('mousedown',handleSwipeStart);lockScreen.removeEventListener('mousemove',handleSwipeMove);lockScreen.removeEventListener('mouseup',handleSwipeEnd);lockScreen.removeEventListener('mouseleave',handleSwipeCancel);lockScreen.removeEventListener('touchstart',handleSwipeStart);lockScreen.removeEventListener('touchmove',handleSwipeMove);lockScreen.removeEventListener('touchend',handleSwipeEnd);lockScreen.removeEventListener('touchcancel',handleSwipeCancel);}
function handleSwipeStart(evt){phoneSwipe.isSwiping=true;phoneSwipe.startY=evt.clientY||evt.touches[0].clientY;id('swipeHint').classList.remove('show');}
function handleSwipeMove(evt){if(!phoneSwipe.isSwiping)return;evt.preventDefault();phoneSwipe.endY=evt.clientY||evt.touches[0].clientY;const deltaY=phoneSwipe.startY-phoneSwipe.endY;if(deltaY>100){handleSuccessfulUnlock();}}
function handleSwipeEnd(){phoneSwipe.isSwiping=false;}
function handleSwipeCancel(){phoneSwipe.isSwiping=false;}
function handleSuccessfulUnlock(){hidePhoneLockScreen();const notification=id('phoneUnlockNotification');notification.classList.add('show');setTimeout(()=>{notification.classList.remove('show');},3000);}
const getSourceName=u=>{const s={'ukrinform.ua':'–£–∫—Ä—ñ–Ω—Ñ–æ—Ä–º','pravda.com.ua':'–£–ü','interfax.com.ua':'–Ü–Ω—Ç–µ—Ä—Ñ–∞–∫—Å','unian.ua':'–£–ù–Ü–ê–ù','hromadske.ua':'–ì—Ä–æ–º–∞–¥—Å—å–∫–µ'};for(const[k,v]of Object.entries(s))if(u.includes(k))return v;return'–ù–æ–≤–∏–Ω–∏';}
const fetchRSSNews=async()=>{if(cachedNews.length>0&&Date.now()-lastFetchTime<CACHE_DURATION)return cachedNews;const p='https://api.allorigins.win/raw?url=';for(let i=0;i<rssFeeds.length;i++){try{const r=await fetch(p+encodeURIComponent(rssFeeds[i]),{mode:'cors'});if(!r.ok)throw new Error();const t=await r.text(),parser=new DOMParser(),x=parser.parseFromString(t,'text/xml'),items=x.querySelectorAll('item'),n=[];items.forEach(item=>{const tl=item.querySelector('title')?.textContent||'',de=item.querySelector('description')?.textContent||'',l=item.querySelector('link')?.textContent||'#',pd=item.querySelector('pubDate')?.textContent||new Date().toISOString();if(tl&&de&&tl.length>5){const cd=de.replace(/<[^>]*>/g,'').substring(0,120);n.push({title:tl.substring(0,70),text:cd+'...',source:getSourceName(rssFeeds[i]),date:pd,link:l});}});if(n.length>0){cachedNews=n.slice(0,10);lastFetchTime=Date.now();return cachedNews;}}catch(e){console.log('RSS Error:',rssFeeds[i]);}}return [];}
const addNewsToTicker=async()=>{try{const n=await fetchRSSNews();if(!n||n.length===0)return;let s=null;for(const i of n){if(!shownNewsUrls.has(i.link)&&i.title&&i.text){s=i;break;}}if(!s){shownNewsUrls.clear();s=n[0];}shownNewsUrls.add(s.link);const nt=id('newsTicker');if(!nt)return;const ni=d.createElement('div');ni.className='news-item';let ds='—Å—å–æ–≥–æ–¥–Ω—ñ';if(s.date){try{const dt=new Date(s.date);if(!isNaN(dt.getTime()))ds=dt.toLocaleTimeString('uk-UA',{hour:'2-digit',minute:'2-digit'});}catch(e){}}ni.innerHTML=`<div class="news-ticker-header"><span class="news-source">${s.source||'–ù–æ–≤–∏–Ω–∏'}</span><span class="news-time">${ds}</span></div><div class="news-ticker-title">${s.title}</div><div class="news-ticker-text">${s.text}</div>`;if(s.link&&s.link!='#'){ni.style.cursor='pointer';ni.addEventListener('click',()=>window.open(s.link,'_blank'));}nt.appendChild(ni);setTimeout(()=>nt.scrollTop=nt.scrollHeight,100);const an=nt.querySelectorAll('.news-item');if(an.length>5)an[0].remove();if(!newsTickerVisible)showNewsTicker();}catch(e){console.error('News error:',e);}}
const showNewsTicker=()=>{const c=id('newsTickerContainer');if(c){c.classList.add('show');newsTickerVisible=true;setTimeout(()=>hideNewsTicker(),15000);}}
const hideNewsTicker=()=>{const c=id('newsTickerContainer');if(c){c.classList.remove('show');newsTickerVisible=false;}}
const handleNewsFeedUpgrade=()=>{addNewsToTicker();showToast('–ù–æ–≤–∏–Ω–∞! üì∞');}
let reelsOverlay=null,reelsInterval=null,reelIndex=0,reelsContent=['–ö–æ—Ç–∏–∫ üê±','–•–∞–∫ üç≥','–¢–∞–Ω–µ—Ü—å üòÇ','–î—ñ–º üè†','–ö–ª–∞—Å ‚ú®','–§–µ–π–ª ü§£','–ü–µ—Å üê∂','–ï–ø—ñ–∫ ü§¶','–ü—Ä–∏—Ä–æ–¥–∞ üåÑ','–ö–ª—ñ–ø üéµ'];
function showReels(){reelsOverlay=d.createElement('div');reelsOverlay.id='reelsOverlay';reelsOverlay.style.cssText='position:fixed;top:0;left:0;width:100%;height:100%;z-index:9991;background:#000;display:flex;flex-direction:column;';const header=d.createElement('div');header.style.cssText='padding:15px;color:white;font-size:20px;text-align:center;border-bottom:1px solid #333;';header.textContent='Reels üì±';const content=d.createElement('div');content.style.cssText='flex:1;display:flex;align-items:center;justify-content:center;color:white;font-size:48px;text-align:center;';content.textContent=reelsContent[reelIndex];const closeBtn=d.createElement('div');closeBtn.style.cssText='position:absolute;top:20px;right:20px;width:40px;height:40px;background:rgba(255,255,255,0.1);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:28px;color:white;cursor:pointer;';closeBtn.innerHTML='√ó';closeBtn.onclick=hideReels;reelsOverlay.appendChild(header);reelsOverlay.appendChild(content);reelsOverlay.appendChild(closeBtn);d.body.appendChild(reelsOverlay);reelsInterval=setInterval(()=>{reelIndex=Math.floor(Math.random()*reelsContent.length);content.textContent=reelsContent[reelIndex];content.style.animation='none';void content.offsetWidth;content.style.animation='reelChange 0.5s ease';},2000);}
function hideReels(){if(reelsOverlay)reelsOverlay.remove();if(reelsInterval)clearInterval(reelsInterval);}
let philosophyOverlay=null,philosophyQuotes=['"–ß–∞—Å - —Ü–µ –Ω–∞–π—Ü—ñ–Ω–Ω—ñ—à–∏–π —Ä–µ—Å—É—Ä—Å."','"–ú–∏ –Ω–µ –º–∞—î–º–æ –º–∞–ª–æ —á–∞—Å—É, –º–∏ –±–∞–≥–∞—Ç–æ –≤—Ç—Ä–∞—á–∞—î–º–æ."','"–ö—Ä–∞—â–µ 3 –≥–æ–¥–∏–Ω–∏ —Ä–∞–Ω—ñ—à–µ, –Ω—ñ–∂ —Ö–≤–∏–ª–∏–Ω–∞ –ø—ñ–∑–Ω–æ."','"–ß–∞—Å –ª–µ—Ç–∏—Ç—å - —Ç–∏ –ø—ñ–ª–æ—Ç."','"–ù–µ –≤–∏—Ç—Ä–∞—á–∞–π —á–∞—Å, —Ü–µ –∂–∏—Ç—Ç—è."','"–ú–∞–π–±—É—Ç–Ω—î –π–¥–µ –ø–æ–≤—ñ–ª—å–Ω–æ, —Ç–µ–ø–µ—Ä—ñ—à–Ω—î –ª–µ—Ç–∏—Ç—å."','"–Ø–∫—ñ—Å—Ç—å —á–∞—Å—É –≤–∞–∂–ª–∏–≤–∞."','"–ß–∞—Å –Ω–µ —á–µ–∫–∞—î."'];
function showPhilosophy(){philosophyOverlay=d.createElement('div');philosophyOverlay.id='philosophyOverlay';philosophyOverlay.style.cssText='position:fixed;top:0;left:0;width:100%;height:100%;z-index:9990;background:linear-gradient(135deg,#2c3e50,#4a6491);display:flex;align-items:center;justify-content:center;';const quote=philosophyQuotes[Math.floor(Math.random()*philosophyQuotes.length)];philosophyOverlay.innerHTML=`<div style="max-width:800px;padding:50px;background:rgba(255,255,255,0.1);backdrop-filter:blur(10px);border-radius:25px;text-align:center;box-shadow:0 20px 60px rgba(0,0,0,0.5);border:2px solid rgba(255,255,255,0.2);"><div style="font-size:48px;margin-bottom:30px;">üí≠</div><div style="font-size:28px;color:white;margin-bottom:30px;font-style:italic;line-height:1.4;">${quote}</div><div style="font-size:18px;color:#e0e0e0;margin-bottom:40px;">–ú—É–¥—Ä—ñ—Å—Ç—å —á–∞—Å—É...</div><button onclick="hidePhilosophy()" style="background:transparent;color:white;border:2px solid white;padding:15px 40px;border-radius:25px;font-size:18px;cursor:pointer;transition:all 0.3s;">–ü—Ä–∏–π–Ω—è—Ç–∏</button></div>`;d.body.appendChild(philosophyOverlay);}
function hidePhilosophy(){if(philosophyOverlay)philosophyOverlay.remove();}
let cringeOverlay=null,cringeMessages=['–¢–≤—ñ–π –±–∞—Ç—å–∫–æ –¥–∏–≤–∏—Ç—å—Å—è —Ç–≤–æ—é —ñ—Å—Ç–æ—Ä—ñ—é –ø–æ—à—É–∫—É...','–¢–∏ —Å–∫–∞–∑–∞–≤ "–¥—è–∫—É—é" –∞–≤—Ç–æ-–≤—ñ–¥–ø–æ–≤—ñ–¥—ñ...','–¢–∏ –≤–∏–ø–∞–¥–∫–æ–≤–æ –Ω–∞–¥—ñ—Å–ª–∞–≤ "–ª—é–±–ª—é" –∫–µ—Ä—ñ–≤–Ω–∏–∫—É...','–í—Å—ñ –ø–æ–±–∞—á–∏–ª–∏ —Ç–≤—ñ–π –µ–∫—Ä–∞–Ω —É Zoom...','–¢–∏ –≤—ñ–¥–ø–æ–≤—ñ–≤ –Ω–µ –Ω–∞ —Ç–æ–π –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è...','–ü—Ä–æ–∫–∏–Ω—É–≤—Å—è –∑ —Ä–æ–±–æ—á–æ–≥–æ –¥–∑–≤—ñ–Ω–∫–∞ –Ω–∞ —Å–ø—ñ–∫–µ—Ä—Ñ–æ–Ω—ñ...','–ü–æ–¥—è–∫—É–≤–∞–≤ –≤–æ–¥—ñ—î–≤—ñ, —â–æ –≤–∏–π—à–æ–≤...','–ó–∞—Å–ø—ñ–≤–∞–≤ —É –Ω–∞–≤—É—à–Ω–∏–∫–∞—Ö, –∞ –≤–æ–Ω–∏ –±—É–ª–∏ –≤–∏–º–∫–Ω–µ–Ω—ñ...','–ü—Ä–∏–≤—ñ—Ç–∞–≤ –Ω–µ–∑–Ω–∞–π–æ–º—Ü—è, –¥—É–º–∞–≤—à–∏, —â–æ –∑–Ω–∞–π–æ–º–∏–π...','–ó–∞–ª–∏—à–∏–≤ –≥–æ–ª–æ—Å–æ–≤–µ –Ω–∞ 10 —Ö–≤–∏–ª–∏–Ω –∑ —Ñ–æ–Ω–æ–≤–∏–º–∏ –∑–≤—É–∫–∞–º–∏...'];
function showCringe(){cringeOverlay=d.createElement('div');cringeOverlay.id='cringeOverlay';cringeOverlay.style.cssText='position:fixed;top:0;left:0;width:100%;height:100%;z-index:9993;background:rgba(0,0,0,0.95);display:flex;align-items:center;justify-content:center;';const msg=cringeMessages[Math.floor(Math.random()*cringeMessages.length)];cringeOverlay.innerHTML=`<div style="max-width:600px;padding:40px;background:linear-gradient(135deg,#7b2cbf,#5a189a);border-radius:25px;text-align:center;box-shadow:0 0 50px rgba(123,44,191,0.7);border:5px solid #9d4edd;"><div style="font-size:48px;margin-bottom:20px;">üò¨</div><div style="font-size:32px;color:white;margin-bottom:20px;">${msg}</div><div style="font-size:18px;color:#e0aaff;margin-bottom:30px;">–¢–∏ –≤—ñ–¥—á—É–≤–∞—î—à –∫—Ä—ñ–Ω–∂? –¶–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!</div><button onclick="hideCringe()" style="background:#ff6d00;color:white;border:none;padding:15px 30px;border-radius:12px;font-size:18px;cursor:pointer;font-weight:bold;">–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏</button></div>`;d.body.appendChild(cringeOverlay);}
function hideCringe(){if(cringeOverlay)cringeOverlay.remove();}
// === DISCORD –ú–ê–†–ê–§–û–ù ===
async function generateAIResponseDirect(u){if(!userGroqApiKey)return{error:'no_key'};try{const r=await fetch('https://api.groq.com/openai/v1/chat/completions',{method:'POST',headers:{'Authorization':`Bearer ${userGroqApiKey}`,'Content-Type':'application/json'},body:JSON.stringify({model:'llama-3.1-8b-instant',messages:[{role:'system',content:'–¢–∏ –ë–∞—Ä–∞–±—É–ª—å–∫–∞ - —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π –≥–µ–π–º–µ—Ä—Å—å–∫–∏–π –ø–æ–º—ñ—á–Ω–∏–∫. –ë—É–¥—å –¥—Ä—É–∂–Ω—ñ–º, –∂–∞—Ä—Ç—ñ–≤–ª–∏–≤–∏–º. –í—ñ–¥–ø–æ–≤—ñ–¥–∞–π 1-2 —Ä–µ—á–µ–Ω–Ω—è–º–∏.'},{role:'user',content:u}],max_tokens:150,temperature:0.7})});if(!r.ok)throw new Error(`API –ø–æ–º–∏–ª–∫–∞: ${r.status}`);const d=await r.json();return d.choices?.[0]?.message?.content||'–ù–µ –≤–¥–∞–ª–æ—Å—è –æ—Ç—Ä–∏–º–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å.';}catch(e){console.error('–ü–æ–º–∏–ª–∫–∞ AI:',e);return{error:'api_fail',message:e.message};}}
function showDiscord(){if(discordOverlay)return;discordChannelMessages={general:[],games:[],tech:[],reality:[],voice:[],ai:[]};visitedChannels={};const c=[{id:'general',name:'üí¨ –∑–∞–≥–∞–ª—å–Ω–∏–π',type:'text'},{id:'games',name:'üéÆ —ñ–≥—Ä–∏',type:'text'},{id:'tech',name:'üîß —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó',type:'text'},{id:'reality',name:'üîê —Ä–µ–∞–ª—å–Ω—ñ—Å—Ç—å',type:'text'},{id:'voice',name:'üé§ –ó–∞–≥–∞–ª—å–Ω–∏–π –≥–æ–ª–æ—Å–æ–≤–∏–π',type:'voice'},{id:'ai',name:'ü§ñ –±–∞—Ä–∞–±—É–ª—å–∫–∞',type:'text',color:'#00FFAA'}];discordOverlay=document.createElement('div');discordOverlay.id='discordOverlay';discordOverlay.style.cssText='position:fixed;top:0;left:0;width:100%;height:100%;z-index:9992;background:#36393f;display:flex;font-family:"Poppins",sans-serif;';const s=document.createElement('div');s.style.cssText='width:240px;background:#202225;color:#fff;display:flex;flex-direction:column;overflow-y:auto;padding:15px 0;';const h=document.createElement('div');h.innerHTML='<div style="text-align:center;padding:15px;color:#fff;font-weight:bold;border-bottom:1px solid #2f3136">DISCORD</div>';s.appendChild(h);const l=document.createElement('div');l.style.cssText='padding:10px 0;';c.forEach(ch=>{const e=document.createElement('div');e.style.cssText=`padding:8px 15px;margin:2px 10px;border-radius:5px;cursor:pointer;color:${ch.color||'#8e9297'};display:flex;align-items:center;transition:background 0.2s;font-size:14px;`;e.innerHTML=`${ch.type==='voice'?'üîä':'#'} ${ch.name}`;e.onclick=()=>switchDiscordChannel(ch.id);e.classList.add('channel-item');e.dataset.channelId=ch.id;if(ch.id===currentDiscordChannel)e.classList.add('active');l.appendChild(e);});s.appendChild(l);updateChannelList();const style=document.createElement('style');style.textContent='.channel-item.active{background-color:#5865F2!important;color:white!important;}';discordOverlay.appendChild(style);const m=document.createElement('div');m.style.cssText='flex:1;display:flex;flex-direction:column;background:#36393f;';const ch=document.createElement('div');ch.id='discordChannelHeader';ch.style.cssText='padding:15px 20px;border-bottom:1px solid #2f3136;color:#fff;font-weight:bold;display:flex;align-items:center;';ch.innerHTML=`<span style="color:#8e9297;margin-right:10px;">${currentDiscordChannel==='voice'?'üîä':'#'}</span> ${c.find(x=>x.id===currentDiscordChannel)?.name||'general'}`;m.appendChild(ch);const mc=document.createElement('div');mc.id='discordMessages';mc.style.cssText='flex:1;overflow-y:auto;padding:20px;background:#36393f;background-image:url("https://cdn.pixabay.com/photo/2018/08/14/13/23/ocean-3605547_1280.jpg");background-size:cover;background-blend-mode:overlay;';[{u:'System',m:'–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –≤ Discord-–º–∞—Ä–∞—Ñ–æ–Ω! üéÆ',c:'#57F287'},{u:'Admin',m:'–ü—Ä–∞–≤–∏–ª–∞: –±—É—Ç–∏ –≤–≤—ñ—á–ª–∏–≤–∏–º, –Ω–µ —Å–ø–∞–º–∏—Ç–∏.',c:'#ED4245'},{u:'StreamerBoy',m:'–•—Ç–æ —Å—å–æ–≥–æ–¥–Ω—ñ –≥—Ä–∞—î?',c:'#FEE75C'},{u:'GamerGirl',m:'–Ø –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ! –î–∞–≤–∞–π—Ç–µ —â–æ—Å—å –æ–±–∏—Ä–∞—Ç–∏.',c:'#EB459E'}].forEach(x=>addMessageToChannel('general',x.u,x.m,x.c));switchDiscordChannel('general');m.appendChild(mc);const i=document.createElement('div');i.style.cssText='padding:20px;background:#40444b;display:flex;align-items:center;border-top:1px solid #2f3136;';const mi=document.createElement('input');mi.type='text';mi.placeholder=currentDiscordChannel==='ai'?'–ù–∞–ø–∏—à—ñ—Ç—å –ë–∞—Ä–∞–±—É–ª—å—Ü—ñ... (–ø–æ—Ç—Ä—ñ–±–µ–Ω –∫–ª—é—á —É #—Ä–µ–∞–ª—å–Ω—ñ—Å—Ç—å)':'–ù–∞–ø–∏—à—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è...';mi.style.cssText='flex:1;padding:12px 15px;background:#202225;border:none;border-radius:8px;color:#fff;font-size:14px;outline:none;';mi.disabled=currentDiscordChannel==='voice';const sb=document.createElement('button');sb.innerHTML='–ù–∞–¥—ñ—Å–ª–∞—Ç–∏';sb.style.cssText='margin-left:10px;padding:12px 25px;background:#5865F2;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:bold;transition:background 0.2s;';sb.onmouseover=()=>sb.style.background='#4752c4';sb.onmouseout=()=>sb.style.background='#5865F2';sb.onclick=async()=>{const t=mi.value.trim();if(!t)return;if(currentDiscordChannel==='ai'){addMessageToChannel('ai','–í–∏',t,'#FFFFFF');mi.value='';const tm=addMessageToChannel('ai','–ë–∞—Ä–∞–±—É–ª—å–∫–∞','–î—É–º–∞—î...','#00FFAA');const ar=await generateAIResponseDirect(t);if(tm&&tm.parentNode)tm.parentNode.removeChild(tm);if(ar.error==='no_key'){addMessageToChannel('ai','–°–∏—Å—Ç–µ–º–∞','‚ùå –ó–∞–π–¥—ñ—Ç—å –≤ #—Ä–µ–∞–ª—å–Ω—ñ—Å—Ç—å —Ç–∞ –≤–≤–µ–¥—ñ—Ç—å API –∫–ª—é—á Groq.','#FFAA00');}else if(ar.error==='api_fail'){addMessageToChannel('ai','–ë–∞—Ä–∞–±—É–ª—å–∫–∞',`–ü–æ–º–∏–ª–∫–∞: ${ar.message||'–°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑'}`,'#FF4444');}else{addMessageToChannel('ai','–ë–∞—Ä–∞–±—É–ª—å–∫–∞',ar,'#00FFAA');}}else if(currentDiscordChannel==='voice'){if(!visitedChannels.voice){addMessageToChannel('voice','–°–∏—Å—Ç–µ–º–∞','üé§ –í–∏ —É–≤—ñ–π—à–ª–∏ –≤ –≥–æ–ª–æ—Å–æ–≤–∏–π –∫–∞–Ω–∞–ª.','#5865F2');addMessageToChannel('voice','System','üé§ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –æ–Ω–ª–∞–π–Ω: GamerGirl, StreamerBoy, ProPlayer','#57F287');visitedChannels.voice=true;}}else{const us=['GamerGirl','StreamerBoy','NoobMaster','ProPlayer'],cl=['#EB459E','#ED4245','#FEE75C','#57F287'],ru=us[Math.floor(Math.random()*4)],rc=cl[Math.floor(Math.random()*4)];addMessageToChannel(currentDiscordChannel,ru,t,rc);mi.value='';const rt=['–ö—Ä—É—Ç–æ!','–Ø –Ω–µ –∑–≥–æ–¥–µ–Ω','–¢–∞–∫ —Ç—Ä–∏–º–∞—Ç–∏!','–¶—ñ–∫–∞–≤–æ...','–ê —è –¥—É–º–∞—é —ñ–Ω–∞–∫—à–µ'][Math.floor(Math.random()*5)],ru2=us[Math.floor(Math.random()*4)],rc2=cl[Math.floor(Math.random()*4)];setTimeout(()=>addMessageToChannel(currentDiscordChannel,ru2,rt,rc2),1000+Math.random()*2000);}};mi.onkeydown=(evt)=>evt.key==='Enter'&&sb.click();i.appendChild(mi);i.appendChild(sb);m.appendChild(i);const cb=document.createElement('div');cb.innerHTML='√ó';cb.style.cssText='position:absolute;top:15px;right:20px;width:40px;height:40px;background:rgba(255,255,255,0.1);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:28px;color:#fff;cursor:pointer;z-index:9993;';cb.onclick=hideDiscord;discordOverlay.appendChild(s);discordOverlay.appendChild(m);discordOverlay.appendChild(cb);document.body.appendChild(discordOverlay);startDiscordActivity();}
function switchDiscordChannel(cid){currentDiscordChannel=cid;unreadCounts[cid]=0;updateChannelList();const h=document.getElementById('discordChannelHeader'),i=document.querySelector('#discordOverlay input[type="text"]'),m=document.getElementById('discordMessages');if(!h||!i||!m)return;const cn={general:'üí¨ –∑–∞–≥–∞–ª—å–Ω–∏–π',games:'üéÆ —ñ–≥—Ä–∏',tech:'üîß —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó',reality:'üîê —Ä–µ–∞–ª—å–Ω—ñ—Å—Ç—å',voice:'üé§ –ó–∞–≥–∞–ª—å–Ω–∏–π –≥–æ–ª–æ—Å–æ–≤–∏–π',ai:'ü§ñ –±–∞—Ä–∞–±—É–ª—å–∫–∞'};h.innerHTML=`<span style="color:#8e9297;margin-right:10px;">${cid==='voice'?'üîä':'#'}</span> ${cn[cid]}`;m.innerHTML='';if(discordChannelMessages[cid]){discordChannelMessages[cid].forEach(msg=>{const md=document.createElement('div');md.style.cssText=`margin-bottom:20px;padding:10px;background:rgba(0,0,0,0.5);border-radius:8px;border-left:4px solid ${msg.color};animation:fadeIn 0.3s ease;`;md.innerHTML=`<div style="display:flex;align-items:center;margin-bottom:5px;"><div style="width:32px;height:32px;background:${msg.color};border-radius:50%;margin-right:10px;display:flex;align-items:center;justify-content:center;font-weight:bold;">${msg.user.charAt(0)}</div><div><span style="color:${msg.color};font-weight:bold;">${msg.user}</span><span style="color:#72767d;font-size:12px;margin-left:10px;">${msg.time||getCurrentTime()}</span></div></div><div style="color:#dcddde;padding-left:42px;font-size:14px;">${msg.message}</div>`;m.appendChild(md);});m.scrollTop=m.scrollHeight;}if(cid==='reality'){m.innerHTML=`<div style="color:#fff;text-align:center;padding:40px 20px;"><h3 style="color:#00FFAA;">üîê –ö–∞–Ω–∞–ª —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—ñ</h3><p style="color:#b9bbbe;margin:20px 0;">–î–ª—è —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è –∑ AI –ë–∞—Ä–∞–±—É–ª—å–∫–∞ –ø–æ—Ç—Ä—ñ–±–µ–Ω API –∫–ª—é—á</p><input type="password" id="groqKeyInput" placeholder="–í—Å—Ç–∞–≤—Ç–µ –≤–∞—à Groq API –∫–ª—é—á" style="width:80%;padding:12px;background:#202225;border:1px solid #00FFAA;border-radius:8px;color:#fff;text-align:center;"><button onclick="saveGroqKey()" style="margin-top:15px;padding:12px 30px;background:#00FFAA;color:#000;border:none;border-radius:8px;font-weight:bold;cursor:pointer;">–ó–±–µ—Ä–µ–≥—Ç–∏ –∫–ª—é—á</button><p style="color:#72767d;font-size:12px;margin-top:20px;">–û—Ç—Ä–∏–º–∞–π—Ç–µ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –∫–ª—é—á –Ω–∞ <a href="https://platform.groq.com" target="_blank" style="color:#5865F2;">platform.groq.com</a></p><p style="color:#ffaa00;font-size:12px;margin-top:10px;">‚ö†Ô∏è –ö–ª—é—á –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ —É –≤–∞—à–æ–º—É –±—Ä–∞—É–∑–µ—Ä—ñ</p></div>`;i.placeholder='–°–ø–æ—á–∞—Ç–∫—É –∑–±–µ—Ä–µ–∂—ñ—Ç—å –∫–ª—é—á –≤–∏—â–µ';i.disabled=true;}else if(cid==='voice'){if(!visitedChannels.voice){addMessageToChannel('voice','–°–∏—Å—Ç–µ–º–∞','–í–∏ —É–≤—ñ–π—à–ª–∏ –≤ –≥–æ–ª–æ—Å–æ–≤–∏–π –∫–∞–Ω–∞–ª.','#5865F2');addMessageToChannel('voice','System','üé§ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –æ–Ω–ª–∞–π–Ω: GamerGirl, StreamerBoy, ProPlayer','#57F287');visitedChannels.voice=true;}i.placeholder='–£ –≥–æ–ª–æ—Å–æ–≤–æ–º—É –∫–∞–Ω–∞–ª—ñ —Ç–µ–∫—Å—Ç–æ–≤–∏–π –≤–≤—ñ–¥ –≤—ñ–¥–∫–ª—é—á–µ–Ω–æ';i.disabled=true;}else if(cid==='ai'){if(!visitedChannels.ai){addMessageToChannel('ai','–ë–∞—Ä–∞–±—É–ª—å–∫–∞','–ü—Ä–∏–≤—ñ—Ç! –Ø —Ç–≤—ñ–π AI-–ø–æ–º—ñ—á–Ω–∏–∫. –ó–∞–¥–∞–≤–∞–π –ø–∏—Ç–∞–Ω–Ω—è –ø—Ä–æ —ñ–≥—Ä–∏, —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó –∞–±–æ —â–æ—Å—å —Ü—ñ–∫–∞–≤–µ!','#00FFAA');if(!userGroqApiKey){addMessageToChannel('ai','–°–∏—Å—Ç–µ–º–∞','‚ùå –î–ª—è —Ä–æ–±–æ—Ç–∏ –ø–æ—Ç—Ä—ñ–±–µ–Ω API –∫–ª—é—á. –ó–∞–π–¥—ñ—Ç—å –≤ #—Ä–µ–∞–ª—å–Ω—ñ—Å—Ç—å.','#FFAA00');}visitedChannels.ai=true;}i.placeholder=userGroqApiKey?'–ù–∞–ø–∏—à—ñ—Ç—å –ë–∞—Ä–∞–±—É–ª—å—Ü—ñ...':'–ü–æ—Ç—Ä—ñ–±–µ–Ω –∫–ª—é—á —É #—Ä–µ–∞–ª—å–Ω—ñ—Å—Ç—å';i.disabled=!userGroqApiKey;}else{i.placeholder='–ù–∞–ø–∏—à—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è...';i.disabled=false;}const channelItems=discordOverlay.querySelectorAll('.channel-item');channelItems.forEach(item=>item.classList.remove('active'));const currentItem=discordOverlay.querySelector(`.channel-item[data-channel-id="${cid}"]`);if(currentItem)currentItem.classList.add('active');}
function addMessageToChannel(channelId,user,message,color){const msgObj={user,message,color,time:getCurrentTime()};if(!discordChannelMessages[channelId])discordChannelMessages[channelId]=[];discordChannelMessages[channelId].push(msgObj);if(currentDiscordChannel===channelId&&discordOverlay){const m=document.getElementById('discordMessages');if(m){const md=document.createElement('div');md.style.cssText=`margin-bottom:20px;padding:10px;background:rgba(0,0,0,0.5);border-radius:8px;border-left:4px solid ${color};animation:fadeIn 0.3s ease;`;md.innerHTML=`<div style="display:flex;align-items:center;margin-bottom:5px;"><div style="width:32px;height:32px;background:${color};border-radius:50%;margin-right:10px;display:flex;align-items:center;justify-content:center;font-weight:bold;">${user.charAt(0)}</div><div><span style="color:${color};font-weight:bold;">${user}</span><span style="color:#72767d;font-size:12px;margin-left:10px;">${msgObj.time}</span></div></div><div style="color:#dcddde;padding-left:42px;font-size:14px;">${message}</div>`;m.appendChild(md);m.scrollTop=m.scrollHeight;}}else{if(channelId!=='reality'&&channelId!=='ai'){unreadCounts[channelId]=(unreadCounts[channelId]||0)+1;updateChannelList();}}return null;}
function getCurrentTime(){const n=new Date();return`${n.getHours().toString().padStart(2,'0')}:${n.getMinutes().toString().padStart(2,'0')}`;}
function saveGroqKey(){const i=document.getElementById('groqKeyInput');if(!i)return;userGroqApiKey=i.value.trim();if(userGroqApiKey){localStorage.setItem('timeClickerGroqKey',userGroqApiKey);showToast('‚úÖ –ö–ª—é—á –∑–±–µ—Ä–µ–∂–µ–Ω–æ! –¢–µ–ø–µ—Ä –º–æ–∂–µ—Ç–µ —Å–ø—ñ–ª–∫—É–≤–∞—Ç–∏—Å—è –∑ –ë–∞—Ä–∞–±—É–ª—å–∫–æ—é.');switchDiscordChannel('ai');}else{showToast('‚ùå –í–≤–µ–¥—ñ—Ç—å –∫–ª—é—á!');}}
function updateChannelList(){if(!discordOverlay)return;const channelItems=discordOverlay.querySelectorAll('.channel-item');channelItems.forEach(item=>{const channelId=item.dataset.channelId;let badge=item.querySelector('.unread-badge');if(unreadCounts[channelId]>0){if(!badge){badge=document.createElement('span');badge.className='unread-badge';badge.style.cssText='margin-left:auto;background:#ed4245;color:#fff;border-radius:10px;padding:2px 6px;font-size:11px;';item.appendChild(badge);}badge.textContent=unreadCounts[channelId];}else if(badge){badge.remove();}});}
function startDiscordActivity(){if(discordActivityInterval)clearInterval(discordActivityInterval);discordActivityInterval=setInterval(()=>{if(!discordOverlay)return;const channels=['general','games','tech','voice'];const randomChannel=channels[Math.floor(Math.random()*channels.length)];const users=['GamerGirl','StreamerBoy','ProPlayer','NoobMaster'];const randomUser=users[Math.floor(Math.random()*users.length)];const messages={general:['–ö–æ–ª–∏ –Ω–æ–≤–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è?','–Ø–∫ –≥—Ä–∞—Ç–∏ –∫—Ä–∞—â–µ?','–•—Ç–æ —Ç–æ–ø-1 —Å–µ—Ä–≤–µ—Ä?'],games:['–¶—è –≥—Ä–∞ –∫—Ä—É—Ç–∞!','–ü—Ä–æ—Ö–æ–¥–∂—É –∫–∞–º–ø–∞–Ω—ñ—é','–®—É–∫–∞—é –∫–ª–∞–Ω'],tech:['–Ø–∫–∏–π –ü–ö –¥–ª—è –≥—Ä–∏?','–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –≥—Ä–∞—Ñ—ñ–∫–∏','–î—Ä–∞–π–≤–µ—Ä–∏ –æ–Ω–æ–≤–∏–≤'],voice:['–î–∞–≤–∞–π—Ç–µ –∑—ñ–≥—Ä–∞—î–º–æ –≤ –º–æ—é –≥—Ä—É!','–ß—É—î—Ç–µ –º–µ–Ω–µ?','–ì–æ–ª–æ—Å –ª–∞–≥–∞—î...','–•—Ç–æ –∑–∞?','–£ –º–µ–Ω–µ 3000 –≥–æ–¥–∏–Ω —É –≥—Ä—ñ!']};const randomMessage=messages[randomChannel][Math.floor(Math.random()*messages[randomChannel].length)];const colors={'GamerGirl':'#EB459E','StreamerBoy':'#FEE75C','ProPlayer':'#57F287','NoobMaster':'#ED4245'};const color=colors[randomUser];addMessageToChannel(randomChannel,randomUser,randomMessage,color);},5000);}
function hideDiscord(){if(discordOverlay){discordOverlay.remove();discordOverlay=null;}if(discordActivityInterval){clearInterval(discordActivityInterval);discordActivityInterval=null;}}
window.addEventListener('DOMContentLoaded',()=>{const savedKey=localStorage.getItem('timeClickerGroqKey');if(savedKey)userGroqApiKey=savedKey;});
// === –ó–ê–ü–£–°–ö –Ü–ù–¢–ï–†–í–ê–õ–Ü–í ===
function startIntervals(){setInterval(updateClockHands,50);updateClockHands();setInterval(()=>{const g=Math.round(autoRate*prestigeMultiplier);if(g>0){score+=g;clickCloudTotal+=g;updateScore();}updateStats();updateAchievements();},1000);setInterval(()=>{if(autoRate>maxAutoRate)maxAutoRate=autoRate;if(maxComboEver>maxCombo)maxCombo=maxComboEver;},1000);setInterval(updateSkinHighlights,50);setInterval(saveGame,30000);}
// === –Ü–ù–Ü–¶–Ü–ê–õ–Ü–ó–ê–¶–Ü–Ø –ü–†–ò –ó–ê–í–ê–ù–¢–ê–ñ–ï–ù–ù–Ü ===
d.addEventListener('DOMContentLoaded',function(){id('desktopBtn')?.addEventListener('click',()=>startGame('desktop'));id('mobileBtn')?.addEventListener('click',()=>startGame('mobile'));});
// === –ú–û–î–ê–õ–¨–ù–ï –í–Ü–ö–ù–û QR-–ö–û–î–£ ===
function openModal(){id('modal').style.display='flex';}
function closeModal(){id('modal').style.display='none';}
