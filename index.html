<!doctype html>
<html lang="uk">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>TimesClicker⏰</title>
<meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:; script-src * 'unsafe-inline' 'unsafe-eval'; style-src * 'unsafe-inline'; font-src * data:; connect-src *; media-src * data: blob:;">
<meta http-equiv="X-Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:; script-src * 'unsafe-inline' 'unsafe-eval'">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css?v=17">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<style>
/* Стилі для компактного QR-кода */
.title-wrapper {
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
}

.qr-mini {
    position: absolute;
    left: 10px;
    width: 35px;
    height: 35px;
    background: white;
    padding: 2px;
    border-radius: 5px;
    cursor: pointer;
    transition: transform 0.2s ease;
}

.qr-mini:hover {
    transform: scale(1.1);
}

.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,.8);
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.modal-content {
    background: white;
    padding: 25px;
    border-radius: 12px;
    text-align: center;
    max-width: 280px;
}

.large-qr {
    width: 180px;
    height: 180px;
    margin-bottom: 15px;
    border: 1px solid #ddd;
    border-radius: 8px;
}

.modal-text {
    font-size: 14px;
    line-height: 1.4;
    color: #333;
    margin-bottom: 15px;
}

.close-btn {
    padding: 6px 16px;
    background: #667eea;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
}
</style>
</head>
<body>
<!-- === ЕКРАН ВИБОРУ ВЕРСІЇ === -->
<div id="chooser"><h1>Times Clicker</h1><button class="choose-btn" onclick="startGame('pc')">ПК-версія</button><button class="choose-btn" onclick="startGame('mobile')">Мобільна версія</button></div>

<!-- === ОСНОВНА ГРА === -->
<div id="game" style="display:none">
<!-- Заголовок з QR-кодом -->
<div class="title-wrapper">
    <img src="https://api.qrserver.com/v1/create-qr-code/?size=35x35&data=https://t.me/brainmathx_bot" 
         alt="QR" class="qr-mini" onclick="openModal()">
    <div id="worldTitle" class="editable-title" contenteditable="true">Times Clicker</div>
</div>

<!-- === СИСТЕМА ВКЛАДОК === -->
<div class="top-tabs">
<button class="tab active" data-tab="tab-upgrades">Апгрейди</button>
<button class="tab" data-tab="tab-skins">Скіни</button>
<button class="tab" data-tab="tab-stats">Статистика</button>
<button class="tab" data-tab="tab-achievements">Досягнення</button>
<button class="tab" data-tab="tab-reverb">Перезапуск</button>
<button class="tab" data-tab="tab-multipliers">Множники</button>
</div>

<!-- Решта коду залишається без змін -->
<div class="container">
<div class="left-panel">
<div class="tab-body">
<!-- ВКЛАДКА АПГРЕЙДІВ --><div id="tab-upgrades" class="tab-page active"><h3>Апгрейди</h3><div id="upgrades" class="upgrades-container"></div></div>
<!-- ВКЛАДКА СКІНІВ --><div id="tab-skins" class="tab-page"><h3>Скіни</h3>
<div class="skins-section">
<h4>Форма годинника</h4><div class="skins-grid" id="shapeSkins"></div>
<h4>Колір годинника</h4><div class="skins-grid" id="clockSkins"></div>
<h4>Стрілки</h4><div class="skins-grid" id="handSkins"></div>
<h4>Ефект кліку</h4><div class="skins-grid" id="effectSkins"></div>
</div></div>
<!-- ВКЛАДКА СТАТИСТИКИ --><div id="tab-stats" class="tab-page"><h3>Статистика</h3>
<ul class="stats-list">
<li>Часу витрачено: <span id="cloudTotal">0 сек</span></li>
<li>Реальний час у сесії: <span id="realTimePlayed">0 сек</span></li>
<li>Віртуально витрачено: <span id="virtualTime">0 сек</span></li>
<li>Куплено апгрейдів: <span id="totalUpgrades">0</span></li>
<li>Найбільше за клік: <span id="maxPerClick">0 сек</span></li>
<li>Найбільше за авто/сек: <span id="maxAutoRate">0 сек</span></li>
<li>Найдовше комбо: <span id="maxCombo">0</span> кліків</li>
<li>Перезапусків зроблено: <span id="totalReverbs">0</span></li>
<li>Поточний множник: <span id="prestigeMult">1.00</span>×</li>
<li class="stats-separator">Досягнення: <span id="achievedCount">0</span> / <span id="totalAchievements">6</span></li>
<li class="stats-separator">Зібрано скінів:</li>
<li>• Форми годинника: <span id="shapeSkinsCount">1</span>/4</li>
<li>• Кольори годинника: <span id="clockSkinsCount">1</span>/4</li>
<li>• Стрілки: <span id="handSkinsCount">1</span>/4</li>
<li>• Ефекти кліку: <span id="effectSkinsCount">1</span>/5</li>
<li>Всього скінів: <span id="totalSkins">4</span>/17</li>
</ul></div>
<!-- ВКЛАДКА ДОСЯГНЕНЬ --><div id="tab-achievements" class="tab-page"><h3>Досягнення</h3><div id="achievements" class="achievements-grid"></div></div>
<!-- ВКЛАДКА ПЕРЕЗАПУСКУ --><div id="tab-reverb" class="tab-page"><h3>Перезапуск</h3>
<p id="reverbDesc">Повертаючи час назад, ти отримаєш множник <span id="nextMultiplier">1.20</span>× до всіх прибутків.</p>
<div id="prestigeProgressContainer" style="margin: 20px auto; max-width: 400px; background: #1e293b; border-radius: 15px; padding: 15px; border: 2px solid #334155;">
    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
        <span style="color: #cbd5e1; font-size: 14px;">Прогрес перезапуску</span>
        <span id="prestigeProgressText" style="color: #e2e8f0; font-size: 14px; font-weight: bold;">0 / 1 година</span>
    </div>
    <div style="background: #334155; border-radius: 10px; height: 20px; overflow: hidden;">
        <div id="prestigeProgressBar" style="height: 100%; width: 0%; background: linear-gradient(90deg, #ef4444, #f87171); border-radius: 10px; transition: width 0.3s ease, background 0.3s ease;"></div>
    </div>
    <div style="margin-top: 8px; color: #94a3b8; font-size: 12px; text-align: center;">
        Наступний множник: ×1.20
    </div>
</div>
<button id="reverbBtn" class="reverb-btn">Повернути час назад</button>
</div>
<!-- ВКЛАДКА МНОЖНИКІВ --><div id="tab-multipliers" class="tab-page"><h3>Множники кліку</h3><div id="multipliers" class="upgrades-container"></div></div>
</div></div>

<!-- === ПРАВА ПАНЕЛЬ - ГОДИННИК ТА МУЗИКА === -->
<div class="right-panel">
<div id="clockWrapper">
<div id="clickableClock" class="clock round"><div class="hand hour"></div><div class="hand minute"></div><div class="hand second"></div><div class="center-dot"></div></div>
<div id="clickCloud" class="click-cloud"><div id="clickGain">+0 сек</div><div id="currentDate"></div></div>
<div id="comboBubble" class="combo-bubble hidden"><div id="comboCount">0</div><div id="comboText">кліків</div></div>
</div>
<p id="score">Часу витрачено: 0 сек</p>
<div class="music-player">
<button id="prevTrack" class="music-switch">⬅️</button>
<button id="musicBtn" class="phonk-btn">▶️ Включити музику</button>
<button id="nextTrack" class="music-switch">➡️</button>
</div>
<div id="nowPlaying" class="now-playing">Зараз: —</div>
<audio id="player" preload="auto"></audio>
</div></div>

<!-- === СИСТЕМА ПЕРЕЗАПУСКУ (РЕВЕРБ) === -->
<div id="reverbOverlay" class="reverb-overlay hidden">
<div class="reverb-instruction">Зажми та тримай годинник 10 секунд,<br>щоб повернути час назад!</div>
<div id="reverbHint" class="reverb-hint">Зажми мене!</div>
<div id="reverbClock" class="clock round"><div class="hand hour"></div><div class="hand minute"></div><div class="hand second"></div><div class="center-dot"></div></div>
</div>
<div id="timeTunnel" class="time-tunnel"></div>

<!-- === КОНТЕЙНЕР СПОВІЩЕНЬ === -->
<div id="toastContainer"></div>
</div>

<!-- Модальне вікно для QR-кода -->
<div class="modal" id="modal">
<div class="modal-content">
<img src="https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=https://t.me/brainmathx_bot" alt="QR Code" class="large-qr">
<p class="modal-text">Навіщо витрачати час на вирішення рівнянь, якщо його можна використати на щось корисніше?</p>
<button class="close-btn" onclick="closeModal()">Закрити</button>
</div>
</div>

<!-- === ПІДКЛЮЧЕННЯ СКРИПТІВ === -->
<script src="script.js?v=17"></script>
<script>
function openModal(){document.getElementById('modal').style.display='flex'}
function closeModal(){document.getElementById('modal').style.display='none'}
document.getElementById('modal').addEventListener('click',function(e){if(e.target===this)closeModal()})
document.addEventListener('keydown',function(e){if(e.key==='Escape')closeModal()})
window.onload=function(){document.getElementById('chooser').style.display='flex';document.getElementById('game').style.display='none'}
</script>
</body>
</html>
